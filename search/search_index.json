{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udcca Global-Data-Finance","text":"<p>Biblioteca Python enterprise para extra\u00e7\u00e3o e processamento de dados financeiros globais com arquitetura limpa, alta performance e ferramentas extens\u00edveis.</p> <p> </p>"},{"location":"#o-que-este-sistema-oferece","title":"\ud83c\udfaf O que este sistema oferece?","text":"<p>Global-Data-Finance \u00e9 uma biblioteca Python que permite extrair e processar dados financeiros de forma profissional e escal\u00e1vel:</p> <p>\u2705 M\u00faltiplas fontes de dados: CVM (regulat\u00f3rio) e B3 (mercado) com f\u00e1cil integra\u00e7\u00e3o \u2705 Processamento otimizado: Downloads paralelos ass\u00edncronos at\u00e9 10x mais r\u00e1pidos \u2705 Formato eficiente: Extra\u00e7\u00e3o nativa para Parquet (Pandas/Polars ready) \u2705 Robustez integrada: Sistema de retries inteligente e monitoramento de recursos \u2705 Arquitetura limpa: C\u00f3digo test\u00e1vel, manuten\u00edvel e escal\u00e1vel seguindo SOLID</p>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"#instalacao","title":"Instala\u00e7\u00e3o","text":"<pre><code># Instala\u00e7\u00e3o b\u00e1sica via PyPI\npip install globaldatafinance\n\n# OU com Poetry\npoetry add globaldatafinance\n</code></pre>"},{"location":"#configuracao","title":"Configura\u00e7\u00e3o","text":"<pre><code># Requer Python 3.12+\npython --version\n\n# Opcional: configurar logging para ver progresso detalhado\nexport LOG_LEVEL=INFO\n</code></pre>"},{"location":"#primeiro-download-em-3-linhas","title":"Primeiro Download em 3 Linhas","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\n\ncvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"./dados_cvm\",\n    list_docs=[\"DFP\"],\n    initial_year=2023,\n    automatic_extractor=True\n)\n</code></pre>"},{"location":"#funcionalidades-principais","title":"\u2728 Funcionalidades Principais","text":""},{"location":"#multiplas-fontes-de-dados","title":"\ud83d\udcc8 M\u00faltiplas Fontes de Dados","text":"<pre><code># CVM - Documentos Regulat\u00f3rios (DFP, ITR, FRE, FCA, etc.)\nfrom globaldatafinance import FundamentalStocksDataCVM\n\ncvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"./dados_cvm\",\n    list_docs=[\"DFP\", \"ITR\"],\n    initial_year=2023,\n    last_year=2024,\n    automatic_extractor=True\n)\n\n# B3 - Cota\u00e7\u00f5es Hist\u00f3ricas (A\u00e7\u00f5es, ETFs, Op\u00e7\u00f5es, Futuros)\nfrom globaldatafinance import HistoricalQuotesB3\n\nb3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=\"./dados_brutos_b3\",\n    destination_path=\"./dados_processados\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n    initial_year=2023,\n    processing_mode=\"fast\"\n)\n</code></pre>"},{"location":"#processamento-inteligente","title":"\ud83d\udd27 Processamento Inteligente","text":"<p>A biblioteca oferece diferentes modos de processamento para otimizar performance:</p> <pre><code># Modo FAST - Processamento em mem\u00f3ria (mais r\u00e1pido)\nb3.extract(\n    path_of_docs=\"./dados\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    processing_mode=\"fast\"  # Recomendado para datasets pequenos/m\u00e9dios\n)\n\n# Modo SLOW - Processamento incremental (menor uso de mem\u00f3ria)\nb3.extract(\n    path_of_docs=\"./dados\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    processing_mode=\"slow\"  # Recomendado para datasets grandes\n)\n</code></pre> <p>Tipos de Ativos Suportados (B3):</p> <ul> <li><code>a\u00e7\u00f5es</code> - Mercado \u00e0 vista e fracion\u00e1rio</li> <li><code>etf</code> - Exchange Traded Funds</li> <li><code>op\u00e7\u00f5es</code> - Calls e Puts</li> <li><code>termo</code> - Mercado a termo</li> <li><code>futuro</code> - Contratos futuros</li> </ul> <p>Verificar ativos dispon\u00edveis:</p> <pre><code>b3 = HistoricalQuotesB3()\navailable_assets = b3.get_available_assets()\nprint(f\"Ativos suportados: {available_assets}\")\n</code></pre>"},{"location":"#documentos-cvm-disponiveis","title":"\ud83d\udcca Documentos CVM Dispon\u00edveis","text":"<pre><code>cvm = FundamentalStocksDataCVM()\n\n# Ver documentos dispon\u00edveis\ndocs = cvm.get_available_docs()\nfor doc_type, description in docs.items():\n    print(f\"{doc_type}: {description}\")\n\n# Ver anos dispon\u00edveis\nyears = cvm.get_available_years()\nprint(f\"Anos dispon\u00edveis: {years['initial_year']} - {years['last_year']}\")\n</code></pre> <p>Documentos Suportados:</p> <ul> <li><code>DFP</code> - Demonstra\u00e7\u00f5es Financeiras Padronizadas (anual)</li> <li><code>ITR</code> - Informa\u00e7\u00f5es Trimestrais</li> <li><code>FRE</code> - Formul\u00e1rio de Refer\u00eancia</li> <li><code>FCA</code> - Formul\u00e1rio Cadastral</li> <li><code>CGVN</code> - Comunicado de Governan\u00e7a</li> <li><code>VLMO</code> - Valor Mobili\u00e1rio</li> <li><code>IPE</code> - Informa\u00e7\u00f5es Peri\u00f3dicas e Eventuais</li> </ul>"},{"location":"#analise-de-dados","title":"\ud83d\udcbe An\u00e1lise de Dados","text":"<pre><code>import pandas as pd\n\n# Ler dados processados (formato Parquet)\ndf_cotacoes = pd.read_parquet(\"./dados_processados/cotahist_extracted.parquet\")\n\n# An\u00e1lise b\u00e1sica\nprint(df_cotacoes.head())\nprint(df_cotacoes.info())\n\n# An\u00e1lise de pre\u00e7os m\u00e9dios por ativo\nprecos_medios = df_cotacoes.groupby(\"cod_negociacao\")[\"preco_fechamento\"].mean()\nprint(precos_medios.sort_values(ascending=False).head(10))\n</code></pre>"},{"location":"#configuracoes-avancadas","title":"\u2699\ufe0f Configura\u00e7\u00f5es Avan\u00e7adas","text":"<pre><code>import logging\n\n# Configurar n\u00edvel de logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\n\n# Download com configura\u00e7\u00f5es customizadas\ncvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"./dados_cvm\",\n    list_docs=[\"DFP\", \"ITR\", \"FRE\"],\n    initial_year=2020,\n    last_year=2024,\n    automatic_extractor=True  # Converte ZIP para Parquet automaticamente\n)\n</code></pre>"},{"location":"#documentacao","title":"\ud83d\udcda Documenta\u00e7\u00e3o","text":""},{"location":"#para-usuarios","title":"Para Usu\u00e1rios","text":"<ul> <li>Instala\u00e7\u00e3o - Configure seu ambiente passo a passo</li> <li>In\u00edcio R\u00e1pido - Aprenda os fundamentos</li> <li>Documentos CVM - Guia completo de dados regulat\u00f3rios</li> <li>Cota\u00e7\u00f5es B3 - Guia completo de dados de mercado</li> <li>Exemplos Pr\u00e1ticos - Casos de uso reais</li> <li>FAQ - Perguntas frequentes</li> </ul>"},{"location":"#para-desenvolvedores","title":"Para Desenvolvedores","text":"<ul> <li>Arquitetura - Clean Architecture e padr\u00f5es de design</li> <li>Refer\u00eancia da API - Documenta\u00e7\u00e3o completa da API</li> <li>Como Contribuir - Guia de contribui\u00e7\u00e3o</li> <li>Testes - Estrat\u00e9gias de teste e cobertura</li> <li>Uso Avan\u00e7ado - T\u00e9cnicas avan\u00e7adas e otimiza\u00e7\u00f5es</li> </ul>"},{"location":"#referencia-tecnica","title":"Refer\u00eancia T\u00e9cnica","text":"<ul> <li>API CVM - Refer\u00eancia completa da API CVM</li> <li>API B3 - Refer\u00eancia completa da API B3</li> <li>Exce\u00e7\u00f5es - Tratamento de erros e exce\u00e7\u00f5es</li> </ul>"},{"location":"#por-que-usar-esta-biblioteca","title":"\ud83c\udfd7\ufe0f Por Que Usar Esta Biblioteca?","text":""},{"location":"#para-empresas","title":"Para Empresas","text":"<ul> <li>\u2705 Performance: Downloads paralelos ass\u00edncronos at\u00e9 10x mais r\u00e1pidos</li> <li>\u2705 Confiabilidade: Sistema de retries com backoff exponencial</li> <li>\u2705 Monitoramento: Logging detalhado e rastreamento de recursos</li> <li>\u2705 Escalabilidade: Arquitetura preparada para grandes volumes de dados</li> </ul>"},{"location":"#para-desenvolvedores_1","title":"Para Desenvolvedores","text":"<ul> <li>\u2705 Clean Architecture: C\u00f3digo limpo, test\u00e1vel e manuten\u00edvel</li> <li>\u2705 SOLID: F\u00e1cil de estender com novos provedores e funcionalidades</li> <li>\u2705 Type hints: Suporte completo para IDEs e type checkers</li> <li>\u2705 CI/CD: Quality checks autom\u00e1ticos com GitHub Actions</li> </ul>"},{"location":"#para-analistas-e-cientistas-de-dados","title":"Para Analistas e Cientistas de Dados","text":"<ul> <li>\u2705 Formato Parquet: Dados otimizados para an\u00e1lise com Pandas/Polars</li> <li>\u2705 API Intuitiva: Interface simples e direta ao ponto</li> <li>\u2705 Dados Limpos: Processamento e valida\u00e7\u00e3o autom\u00e1tica</li> <li>\u2705 Documenta\u00e7\u00e3o Completa: Exemplos pr\u00e1ticos e casos de uso reais</li> </ul>"},{"location":"#arquitetura","title":"\ud83d\udcca Arquitetura","text":"<p>O projeto segue Clean Architecture e SOLID principles:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      PRESENTATION LAYER             \u2502  \u2190 FundamentalStocksDataCVM\n\u2502  (Controllers/User Interface)       \u2502    HistoricalQuotesB3\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      APPLICATION LAYER              \u2502  \u2190 Use Cases &amp; DTOs\n\u2502    (Business Logic)                 \u2502    Orchestration\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        DOMAIN LAYER                 \u2502  \u2190 Entities &amp; Business Rules\n\u2502      (Core Business)                \u2502    Domain Models\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    INFRASTRUCTURE LAYER             \u2502  \u2190 HTTP Adapters, File I/O\n\u2502    (External Services)              \u2502    Parsers, Extractors\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Benef\u00edcios da Arquitetura:</p> <ul> <li>Test\u00e1vel: Cada camada pode ser testada independentemente</li> <li>Flex\u00edvel: F\u00e1cil substitui\u00e7\u00e3o de componentes (ex: trocar HTTP client)</li> <li>Escal\u00e1vel: Adicione novas fontes de dados sem quebrar c\u00f3digo existente</li> <li>Manuten\u00edvel: Separa\u00e7\u00e3o clara de responsabilidades</li> </ul> <p>Saiba mais sobre a arquitetura \u2192</p>"},{"location":"#casos-de-uso","title":"\ud83d\ude80 Casos de Uso","text":""},{"location":"#1-analise-fundamentalista","title":"1. An\u00e1lise Fundamentalista","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\nimport pandas as pd\n\n# Baixar demonstra\u00e7\u00f5es financeiras\ncvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"./dados_fundamentalistas\",\n    list_docs=[\"DFP\", \"ITR\"],\n    initial_year=2020,\n    automatic_extractor=True\n)\n\n# Analisar balan\u00e7os patrimoniais\ndf_balanco = pd.read_parquet(\"./dados_fundamentalistas/DFP_2023.parquet\")\nprint(df_balanco[df_balanco['conta'].str.contains('Ativo Total')])\n</code></pre>"},{"location":"#2-backtesting-de-estrategias","title":"2. Backtesting de Estrat\u00e9gias","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\nimport pandas as pd\n\n# Extrair cota\u00e7\u00f5es hist\u00f3ricas\nb3 = HistoricalQuotesB3()\nb3.extract(\n    path_of_docs=\"./dados_brutos\",\n    destination_path=\"./cotacoes\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2020,\n    processing_mode=\"fast\"\n)\n\n# Carregar e analisar\ndf = pd.read_parquet(\"./cotacoes/cotahist_extracted.parquet\")\ndf['data_pregao'] = pd.to_datetime(df['data_pregao'])\n\n# Calcular retornos\ndf['retorno_diario'] = df.groupby('cod_negociacao')['preco_fechamento'].pct_change()\n</code></pre>"},{"location":"#3-pipeline-de-dados-automatizado","title":"3. Pipeline de Dados Automatizado","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM, HistoricalQuotesB3\nimport logging\n\nlogging.basicConfig(level=logging.INFO)\n\ndef pipeline_dados_financeiros():\n    \"\"\"Pipeline completo de extra\u00e7\u00e3o de dados financeiros\"\"\"\n\n    # 1. Dados fundamentalistas (CVM)\n    print(\"Baixando dados CVM...\")\n    cvm = FundamentalStocksDataCVM()\n    cvm.download(\n        destination_path=\"./data/cvm\",\n        list_docs=[\"DFP\", \"ITR\"],\n        initial_year=2023,\n        automatic_extractor=True\n    )\n\n    # 2. Cota\u00e7\u00f5es hist\u00f3ricas (B3)\n    print(\"Processando cota\u00e7\u00f5es B3...\")\n    b3 = HistoricalQuotesB3()\n    result = b3.extract(\n        path_of_docs=\"./data/raw/b3\",\n        destination_path=\"./data/processed/b3\",\n        assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n        initial_year=2023,\n        processing_mode=\"fast\"\n    )\n\n    print(f\"Pipeline conclu\u00eddo! Total de registros: {result['total_records']:,}\")\n\nif __name__ == \"__main__\":\n    pipeline_dados_financeiros()\n</code></pre>"},{"location":"#contribuindo","title":"\ud83e\udd1d Contribuindo","text":"<p>Quer adicionar uma nova fonte de dados ou melhorar a performance?</p> <ol> <li>Fork o reposit\u00f3rio</li> <li>Crie uma branch: <code>git checkout -b feature/nova-feature</code></li> <li>Implemente seguindo os padr\u00f5es existentes</li> <li>Execute os testes: <code>poetry run pytest --cov=src</code></li> <li>Execute os linters: <code>poetry run pre-commit run --all-files</code></li> <li>Envie um Pull Request</li> </ol> <p>Guia completo de contribui\u00e7\u00e3o \u2192</p>"},{"location":"#suporte","title":"\ud83d\udcde Suporte","text":"<ul> <li>\ud83d\udce7 Email: estraliotojordan@gmail.com</li> <li>\ud83d\udc1b Bugs: GitHub Issues</li> <li>\ud83d\udcac Discuss\u00f5es: GitHub Discussions</li> <li>\ud83d\udcd6 Documenta\u00e7\u00e3o: https://jor0105.github.io/Global-Data-Finance/</li> </ul>"},{"location":"#licenca","title":"\ud83d\udcc4 Licen\u00e7a","text":"<p>Apache 2.0 - Use livremente em seus projetos comerciais e pessoais.</p> <p>Consulte o arquivo LICENSE para mais detalhes.</p>"},{"location":"#autor","title":"\ud83d\udc68\u200d\ud83d\udcbb Autor","text":"<p>Jordan Estralioto</p> <ul> <li>GitHub: @jor0105</li> <li>Email: estraliotojordan@gmail.com</li> <li>PyPI: globaldatafinance</li> </ul> <p>Vers\u00e3o: 0.1.0 \u00daltima atualiza\u00e7\u00e3o: 26/11/2025 Status: \ud83d\ude80 Projeto em produ\u00e7\u00e3o! Aberto para contribui\u00e7\u00f5es e sugest\u00f5es.</p> <sub>Copyright \u00a9 2025 Jordan Estralioto \u2022 Licensed under Apache 2.0</sub>"},{"location":"dev-guide/advanced-usage/","title":"Uso Avan\u00e7ado","text":"<p>T\u00e9cnicas avan\u00e7adas e customiza\u00e7\u00e3o do Global-Data-Finance.</p>"},{"location":"dev-guide/advanced-usage/#core-utilities","title":"Core Utilities","text":""},{"location":"dev-guide/advanced-usage/#sistema-de-logging","title":"Sistema de Logging","text":"<p>Habilite logging profissional para rastreamento e debugging:</p> <pre><code>from globaldatafinance.core import setup_logging, get_logger, log_execution_time\n\n# Configurar logging\nsetup_logging(level=\"INFO\", log_file=\"app.log\")\n\n# Obter logger\nlogger = get_logger(__name__)\n\n# Logging estruturado\nlogger.info(\n    \"Download iniciado\",\n    extra={\"doc_type\": \"DFP\", \"year\": 2023}\n)\n\n# Performance timing\nwith log_execution_time(logger, \"Download CVM\", total=5):\n    cvm.download(...)\n</code></pre> <p>Ver documenta\u00e7\u00e3o completa \u2192</p>"},{"location":"dev-guide/advanced-usage/#configuracao-global","title":"Configura\u00e7\u00e3o Global","text":"<p>Customize network settings via environment variables:</p> <pre><code># Aumentar timeout para conex\u00f5es lentas\nexport DATAFINANCE_NETWORK_TIMEOUT=900\n\n# Mais tentativas de retry\nexport DATAFINANCE_NETWORK_MAX_RETRIES=10\n\n# Backoff mais agressivo\nexport DATAFINANCE_NETWORK_RETRY_BACKOFF=3.0\n</code></pre> <pre><code>from globaldatafinance.core.config import settings\n\n# Verificar configura\u00e7\u00f5es atuais\nprint(f\"Timeout: {settings.network.timeout}s\")\nprint(f\"Max retries: {settings.network.max_retries}\")\n</code></pre>"},{"location":"dev-guide/advanced-usage/#resource-monitoring","title":"Resource Monitoring","text":"<p>Monitore e gerencie recursos automaticamente:</p> <pre><code>from globaldatafinance.core.utils.resource_monitor import (\n    ResourceMonitor,\n    ResourceState,\n    ResourceLimits\n)\n\n# Criar monitor\nmonitor = ResourceMonitor()\n\n# Verificar estado\nstate = monitor.check_resources()\nif state == ResourceState.CRITICAL:\n    print(\"Recursos cr\u00edticos!\")\n\n# Calcular workers seguros\nsafe_workers = monitor.get_safe_worker_count(max_workers=16)\nprint(f\"Usando {safe_workers} workers\")\n\n# Aguardar recursos dispon\u00edveis\nmonitor.wait_for_resources(timeout_seconds=120)\n</code></pre> <p>Ver documenta\u00e7\u00e3o completa \u2192</p>"},{"location":"dev-guide/advanced-usage/#retry-strategy","title":"Retry Strategy","text":"<p>Implemente retry customizado:</p> <pre><code>from globaldatafinance.core.utils.retry_strategy import RetryStrategy\nimport time\n\nstrategy = RetryStrategy(\n    initial_backoff=1.0,\n    max_backoff=30.0,\n    multiplier=2.0\n)\n\nmax_retries = 5\nfor attempt in range(max_retries):\n    try:\n        result = risky_operation()\n        break\n    except Exception as e:\n        if not strategy.is_retryable(e):\n            raise\n\n        if attempt &lt; max_retries - 1:\n            backoff = strategy.calculate_backoff(attempt)\n            print(f\"Retry {attempt + 1} ap\u00f3s {backoff}s...\")\n            time.sleep(backoff)\n</code></pre> <p>Ver documenta\u00e7\u00e3o completa \u2192</p>"},{"location":"dev-guide/advanced-usage/#customizacao-de-adapters","title":"Customiza\u00e7\u00e3o de Adapters","text":""},{"location":"dev-guide/advanced-usage/#criar-adapter-personalizado","title":"Criar Adapter Personalizado","text":"<pre><code>from globaldatafinance.brazil.cvm.fundamental_stocks_data.application.interfaces import (\n    DownloadDocsCVMRepository\n)\nfrom globaldatafinance.brazil.cvm.fundamental_stocks_data.domain import DownloadResultCVM\n\nclass MyCustomAdapter(DownloadDocsCVMRepository):\n    \"\"\"Adapter personalizado para download.\"\"\"\n\n    def download_docs(\n        self,\n        destination_path: str,\n        dict_zip_to_download: Dict[str, List[int]]\n    ) -&gt; DownloadResultCVM:\n        \"\"\"Implementa\u00e7\u00e3o personalizada de download.\"\"\"\n        # Sua l\u00f3gica aqui\n        return DownloadResultCVM(...)\n\n# Uso\nfrom globaldatafinance.brazil.cvm.fundamental_stocks_data.application.use_cases import (\n    DownloadDocumentsUseCaseCVM\n)\n\nadapter = MyCustomAdapter()\nuse_case = DownloadDocumentsUseCaseCVM(adapter)\nresult = use_case.execute(...)\n</code></pre>"},{"location":"dev-guide/advanced-usage/#logging-avancado","title":"Logging Avan\u00e7ado","text":""},{"location":"dev-guide/advanced-usage/#configuracao-personalizada","title":"Configura\u00e7\u00e3o Personalizada","text":"<pre><code>import logging\nfrom globaldatafinance.core import get_logger\n\n# Criar logger personalizado\nlogger = get_logger(\"meu_modulo\")\n\n# Adicionar handler para arquivo\nfile_handler = logging.FileHandler(\"globaldatafinance.log\")\nfile_handler.setLevel(logging.DEBUG)\nformatter = logging.Formatter(\n    '%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\nfile_handler.setFormatter(formatter)\nlogger.addHandler(file_handler)\n\n# Usar\nlogger.info(\"Iniciando processamento...\")\n</code></pre>"},{"location":"dev-guide/advanced-usage/#processamento-paralelo","title":"Processamento Paralelo","text":""},{"location":"dev-guide/advanced-usage/#multiplos-anos-em-paralelo","title":"M\u00faltiplos Anos em Paralelo","text":"<pre><code>from concurrent.futures import ProcessPoolExecutor\nfrom globaldatafinance import HistoricalQuotesB3\n\ndef extract_year(year):\n    b3 = HistoricalQuotesB3()\n    return b3.extract(\n        path_of_docs=\"/data/cotahist\",\n        assets_list=[\"a\u00e7\u00f5es\"],\n        initial_year=year,\n        last_year=year,\n        output_filename=f\"acoes_{year}\"\n    )\n\nyears = range(2020, 2024)\nwith ProcessPoolExecutor(max_workers=4) as executor:\n    results = list(executor.map(extract_year, years))\n\nfor year, result in zip(years, results):\n    print(f\"{year}: {result['total_records']:,} registros\")\n</code></pre>"},{"location":"dev-guide/advanced-usage/#integracao-com-frameworks","title":"Integra\u00e7\u00e3o com Frameworks","text":""},{"location":"dev-guide/advanced-usage/#apache-airflow","title":"Apache Airflow","text":"<pre><code>from airflow import DAG\nfrom airflow.operators.python import PythonOperator\nfrom datetime import datetime\nfrom globaldatafinance import FundamentalStocksDataCVM\n\ndef download_cvm_task():\n    cvm = FundamentalStocksDataCVM()\n    cvm.download(\n        destination_path=\"/data/cvm\",\n        list_docs=[\"DFP\"],\n        initial_year=2023\n    )\n\nwith DAG(\n    'cvm_download_dag',\n    start_date=datetime(2024, 1, 1),\n    schedule_interval='@daily'\n) as dag:\n\n    download = PythonOperator(\n        task_id='download_cvm',\n        python_callable=download_cvm_task\n    )\n</code></pre>"},{"location":"dev-guide/advanced-usage/#prefect","title":"Prefect","text":"<pre><code>from prefect import flow, task\nfrom globaldatafinance import FundamentalStocksDataCVM, HistoricalQuotesB3\n\n@task\ndef download_cvm():\n    cvm = FundamentalStocksDataCVM()\n    cvm.download(\n        destination_path=\"/data/cvm\",\n        list_docs=[\"DFP\"],\n        initial_year=2023\n    )\n\n@task\ndef extract_b3():\n    b3 = HistoricalQuotesB3()\n    return b3.extract(\n        path_of_docs=\"/data/cotahist\",\n        assets_list=[\"a\u00e7\u00f5es\"],\n        initial_year=2023\n    )\n\n@flow\ndef financial_data_pipeline():\n    download_cvm()\n    result = extract_b3()\n    return result\n\n# Executar\nif __name__ == \"__main__\":\n    financial_data_pipeline()\n</code></pre>"},{"location":"dev-guide/advanced-usage/#otimizacoes-de-performance","title":"Otimiza\u00e7\u00f5es de Performance","text":""},{"location":"dev-guide/advanced-usage/#uso-eficiente-de-memoria","title":"Uso Eficiente de Mem\u00f3ria","text":"<pre><code>import polars as pl\n\n# Ler apenas colunas necess\u00e1rias\ndf = pl.read_parquet(\n    \"cotahist.parquet\",\n    columns=[\"data\", \"codigo_negociacao\", \"preco_fechamento\"]\n)\n\n# Filtrar durante leitura\ndf = pl.scan_parquet(\"cotahist.parquet\") \\\n    .filter(pl.col(\"codigo_negociacao\") == \"PETR4\") \\\n    .collect()\n</code></pre>"},{"location":"dev-guide/advanced-usage/#processamento-em-chunks","title":"Processamento em Chunks","text":"<pre><code>import pandas as pd\n\n# Processar arquivo grande em chunks\nfor chunk in pd.read_parquet(\n    \"cotahist.parquet\",\n    chunksize=100000\n):\n    # Processar chunk\n    process_chunk(chunk)\n</code></pre>"},{"location":"dev-guide/advanced-usage/#monitoramento-e-metricas","title":"Monitoramento e M\u00e9tricas","text":""},{"location":"dev-guide/advanced-usage/#tracking-de-progresso","title":"Tracking de Progresso","text":"<pre><code>from tqdm import tqdm\nfrom globaldatafinance import HistoricalQuotesB3\n\nb3 = HistoricalQuotesB3()\n\nyears = range(2020, 2024)\nfor year in tqdm(years, desc=\"Extraindo anos\"):\n    result = b3.extract(\n        path_of_docs=\"/data/cotahist\",\n        assets_list=[\"a\u00e7\u00f5es\"],\n        initial_year=year,\n        last_year=year\n    )\n</code></pre> <p>Veja tamb\u00e9m:</p> <ul> <li>Arquitetura</li> <li>Exemplos Pr\u00e1ticos</li> </ul>"},{"location":"dev-guide/api-reference/","title":"Refer\u00eancia da API","text":"<p>Documenta\u00e7\u00e3o completa da API p\u00fablica do Global-Data-Finance.</p>"},{"location":"dev-guide/api-reference/#modulo-globaldatafinancebrazil","title":"M\u00f3dulo <code>globaldatafinance.brazil</code>","text":""},{"location":"dev-guide/api-reference/#fundamentalstocksdatacvm","title":"<code>FundamentalStocksDataCVM</code>","text":"<p>Interface para download de documentos CVM.</p>"},{"location":"dev-guide/api-reference/#metodos","title":"M\u00e9todos","text":"<p><code>__init__()</code></p> <pre><code>def __init__(self) -&gt; None\n</code></pre> <p>Inicializa o cliente CVM com configura\u00e7\u00f5es padr\u00e3o.</p> <p><code>download()</code></p> <pre><code>def download(\n    self,\n    destination_path: str,\n    list_docs: Optional[List[str]] = None,\n    initial_year: Optional[int] = None,\n    last_year: Optional[int] = None,\n    automatic_extractor: bool = False,\n) -&gt; None\n</code></pre> <p>Baixa documentos CVM.</p> <p>Par\u00e2metros:</p> <ul> <li><code>destination_path</code> (str): Diret\u00f3rio de destino</li> <li><code>list_docs</code> (List[str], opcional): Tipos de documentos</li> <li><code>initial_year</code> (int, opcional): Ano inicial</li> <li><code>last_year</code> (int, opcional): Ano final</li> <li><code>automatic_extractor</code> (bool): Extrair para Parquet</li> </ul> <p><code>get_available_docs()</code></p> <pre><code>def get_available_docs(self) -&gt; Dict[str, str]\n</code></pre> <p>Retorna tipos de documentos dispon\u00edveis.</p> <p><code>get_available_years()</code></p> <pre><code>def get_available_years(self) -&gt; Dict[str, int]\n</code></pre> <p>Retorna informa\u00e7\u00f5es sobre anos dispon\u00edveis.</p>"},{"location":"dev-guide/api-reference/#historicalquotesb3","title":"<code>HistoricalQuotesB3</code>","text":"<p>Interface para extra\u00e7\u00e3o de cota\u00e7\u00f5es B3.</p>"},{"location":"dev-guide/api-reference/#metodos_1","title":"M\u00e9todos","text":"<p><code>__init__()</code></p> <pre><code>def __init__(self) -&gt; None\n</code></pre> <p>Inicializa o cliente B3.</p> <p><code>extract()</code></p> <pre><code>def extract(\n    self,\n    path_of_docs: str,\n    assets_list: List[str],\n    initial_year: Optional[int] = None,\n    last_year: Optional[int] = None,\n    destination_path: Optional[str] = None,\n    output_filename: str = \"cotahist_extracted\",\n    processing_mode: str = \"fast\",\n) -&gt; Dict[str, Any]\n</code></pre> <p>Extrai cota\u00e7\u00f5es hist\u00f3ricas.</p> <p>Par\u00e2metros:</p> <ul> <li><code>path_of_docs</code> (str): Diret\u00f3rio com ZIPs COTAHIST</li> <li><code>assets_list</code> (List[str]): Classes de ativos</li> <li><code>initial_year</code> (int, opcional): Ano inicial</li> <li><code>last_year</code> (int, opcional): Ano final</li> <li><code>destination_path</code> (str, opcional): Diret\u00f3rio de sa\u00edda</li> <li><code>output_filename</code> (str): Nome do arquivo</li> <li><code>processing_mode</code> (str): \u201cfast\u201d ou \u201cslow\u201d</li> </ul> <p>Retorno: Dicion\u00e1rio com chaves <code>success</code>, <code>total_records</code>, <code>output_file</code>, etc.</p> <p><code>get_available_assets()</code></p> <pre><code>def get_available_assets(self) -&gt; List[str]\n</code></pre> <p>Retorna classes de ativos dispon\u00edveis.</p> <p><code>get_available_years()</code></p> <pre><code>def get_available_years(self) -&gt; Dict[str, int]\n</code></pre> <p>Retorna intervalo de anos dispon\u00edvel.</p> <p>Veja tamb\u00e9m:</p> <ul> <li>API CVM - Detalhes t\u00e9cnicos da API CVM</li> <li>API B3 - Detalhes t\u00e9cnicos da API B3</li> </ul>"},{"location":"dev-guide/architecture/","title":"Arquitetura","text":"<p>Documenta\u00e7\u00e3o completa da arquitetura do Global-Data-Finance, padr\u00f5es de design e estrutura do projeto.</p>"},{"location":"dev-guide/architecture/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O Global-Data-Finance \u00e9 constru\u00eddo seguindo princ\u00edpios de Clean Architecture, com separa\u00e7\u00e3o clara entre camadas de dom\u00ednio, aplica\u00e7\u00e3o e infraestrutura. Esta arquitetura garante:</p> <ul> <li>\u2705 Testabilidade: F\u00e1cil cria\u00e7\u00e3o de testes unit\u00e1rios e de integra\u00e7\u00e3o</li> <li>\u2705 Manutenibilidade: C\u00f3digo organizado e f\u00e1cil de entender</li> <li>\u2705 Extensibilidade: Simples adicionar novas funcionalidades</li> <li>\u2705 Independ\u00eancia: Camadas desacopladas e independentes</li> </ul>"},{"location":"dev-guide/architecture/#estrutura-do-projeto","title":"Estrutura do Projeto","text":"<pre><code>globaldatafinance/\n\u251c\u2500\u2500 src/globaldatafinance/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 application/          # Camada de aplica\u00e7\u00e3o (API p\u00fablica)\n\u2502   \u2502   \u251c\u2500\u2500 b3_docs/          # Interface B3\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 historical_quotes.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 result_formatters/\n\u2502   \u2502   \u2514\u2500\u2500 cvm_docs/         # Interface CVM\n\u2502   \u2502       \u251c\u2500\u2500 fundamental_stocks_data.py\n\u2502   \u2502       \u2514\u2500\u2500 result_formatters/\n\u2502   \u251c\u2500\u2500 brazil/               # Implementa\u00e7\u00f5es espec\u00edficas do Brasil\n\u2502   \u2502   \u251c\u2500\u2500 b3_data/          # Dados B3\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 historical_quotes/\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 domain/   # Entidades de dom\u00ednio\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 application/  # Casos de uso\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 infra/    # Adapters e infraestrutura\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 exceptions/\n\u2502   \u2502   \u2514\u2500\u2500 cvm/              # Dados CVM\n\u2502   \u2502       \u2514\u2500\u2500 fundamental_stocks_data/\n\u2502   \u2502           \u251c\u2500\u2500 domain/\n\u2502   \u2502           \u251c\u2500\u2500 application/\n\u2502   \u2502           \u251c\u2500\u2500 infra/\n\u2502   \u2502           \u2514\u2500\u2500 exceptions/\n\u2502   \u251c\u2500\u2500 core/                 # Utilit\u00e1rios e configura\u00e7\u00e3o\n\u2502   \u2502   \u251c\u2500\u2500 logging_config.py\n\u2502   \u2502   \u251c\u2500\u2500 config.py\n\u2502   \u2502   \u2514\u2500\u2500 utils/\n\u2502   \u251c\u2500\u2500 macro_exceptions/     # Exce\u00e7\u00f5es globais\n\u2502   \u2514\u2500\u2500 macro_infra/          # Infraestrutura compartilhada\n\u251c\u2500\u2500 tests/                    # Testes\n\u251c\u2500\u2500 docs/                     # Documenta\u00e7\u00e3o\n\u2514\u2500\u2500 pyproject.toml           # Configura\u00e7\u00e3o do projeto\n</code></pre>"},{"location":"dev-guide/architecture/#camadas-da-arquitetura","title":"Camadas da Arquitetura","text":""},{"location":"dev-guide/architecture/#1-camada-de-aplicacao-application","title":"1. Camada de Aplica\u00e7\u00e3o (<code>application/</code>)","text":"<p>Responsabilidade: Interface p\u00fablica de alto n\u00edvel para usu\u00e1rios finais.</p> <p>Componentes:</p> <ul> <li><code>FundamentalStocksDataCVM</code>: API para documentos CVM</li> <li><code>HistoricalQuotesB3</code>: API para cota\u00e7\u00f5es B3</li> <li>Result formatters: Formata\u00e7\u00e3o de resultados para exibi\u00e7\u00e3o</li> </ul> <p>Caracter\u00edsticas:</p> <ul> <li>API simples e intuitiva</li> <li>Abstrai complexidade interna</li> <li>Gerencia logging e formata\u00e7\u00e3o de sa\u00edda</li> </ul> <p>Exemplo:</p> <pre><code># application/cvm_docs/fundamental_stocks_data.py\nclass FundamentalStocksDataCVM:\n    def __init__(self):\n        self.download_adapter = AsyncDownloadAdapterCVM(...)\n        self.__download_use_case = DownloadDocumentsUseCaseCVM(...)\n\n    def download(self, destination_path, list_docs, ...):\n        # Orquestra casos de uso e formata resultados\n        result = self.__download_use_case.execute(...)\n        self.__result_formatter.print_result(result)\n</code></pre>"},{"location":"dev-guide/architecture/#2-camada-de-dominio-domain","title":"2. Camada de Dom\u00ednio (<code>domain/</code>)","text":"<p>Responsabilidade: Entidades de neg\u00f3cio e regras de dom\u00ednio.</p> <p>Componentes:</p> <ul> <li>Value Objects (ex: <code>DictZipsToDownload</code>, <code>DocsToExtractorB3</code>)</li> <li>Validadores (ex: <code>AvailableDocs</code>, <code>AvailableYears</code>)</li> <li>Entidades de resultado (ex: <code>DownloadResultCVM</code>)</li> </ul> <p>Caracter\u00edsticas:</p> <ul> <li>Sem depend\u00eancias externas</li> <li>L\u00f3gica de neg\u00f3cio pura</li> <li>Imutabilidade quando poss\u00edvel</li> </ul> <p>Exemplo:</p> <pre><code># brazil/cvm/fundamental_stocks_data/domain/available_docs.py\nclass AvailableDocs:\n    DOCS_MAPPING = {\n        \"DFP\": \"Demonstra\u00e7\u00e3o Financeira Padronizada\",\n        \"ITR\": \"Informa\u00e7\u00e3o Trimestral\",\n        # ...\n    }\n\n    def validate_docs_name(self, doc_name: str) -&gt; None:\n        if doc_name not in self.DOCS_MAPPING:\n            raise InvalidDocName(f\"Invalid document: {doc_name}\")\n</code></pre>"},{"location":"dev-guide/architecture/#3-camada-de-aplicacao-interna-application","title":"3. Camada de Aplica\u00e7\u00e3o Interna (<code>application/</code>)","text":"<p>Responsabilidade: Casos de uso e orquestra\u00e7\u00e3o de l\u00f3gica de neg\u00f3cio.</p> <p>Componentes:</p> <ul> <li>Use Cases (ex: <code>DownloadDocumentsUseCaseCVM</code>, <code>ExtractHistoricalQuotesUseCaseB3</code>)</li> <li>Interfaces/Repositories (ex: <code>DownloadDocsCVMRepository</code>)</li> </ul> <p>Caracter\u00edsticas:</p> <ul> <li>Orquestra opera\u00e7\u00f5es complexas</li> <li>Define contratos (interfaces)</li> <li>Coordena dom\u00ednio e infraestrutura</li> </ul> <p>Exemplo:</p> <pre><code># brazil/cvm/fundamental_stocks_data/application/use_cases/download_documents.py\nclass DownloadDocumentsUseCaseCVM:\n    def __init__(self, download_repository: DownloadDocsCVMRepository):\n        self.__download_repository = download_repository\n\n    def execute(self, destination_path, list_docs, ...):\n        # Validar inputs\n        # Gerar URLs\n        # Delegar download para repository\n        return self.__download_repository.download_docs(...)\n</code></pre>"},{"location":"dev-guide/architecture/#4-camada-de-infraestrutura-infra","title":"4. Camada de Infraestrutura (<code>infra/</code>)","text":"<p>Responsabilidade: Implementa\u00e7\u00f5es concretas de adapters e servi\u00e7os externos.</p> <p>Componentes:</p> <ul> <li>Adapters de download (ex: <code>AsyncDownloadAdapterCVM</code>)</li> <li>Adapters de extra\u00e7\u00e3o (ex: <code>ParquetExtractorAdapterCVM</code>)</li> <li>Clientes HTTP, manipuladores de arquivos, etc.</li> </ul> <p>Caracter\u00edsticas:</p> <ul> <li>Implementa interfaces definidas na camada de aplica\u00e7\u00e3o</li> <li>Lida com detalhes t\u00e9cnicos (HTTP, I/O, etc.)</li> <li>Isolada do dom\u00ednio</li> </ul> <p>Exemplo:</p> <pre><code># brazil/cvm/fundamental_stocks_data/infra/adapters/async_download_adapter.py\nclass AsyncDownloadAdapterCVM(DownloadDocsCVMRepository):\n    def download_docs(self, destination_path, dict_zip_to_download):\n        # Implementa\u00e7\u00e3o concreta usando httpx\n        async with httpx.AsyncClient() as client:\n            tasks = [self._download_file(url, ...) for url in urls]\n            results = await asyncio.gather(*tasks)\n        return DownloadResultCVM(...)\n</code></pre>"},{"location":"dev-guide/architecture/#padroes-de-design","title":"Padr\u00f5es de Design","text":""},{"location":"dev-guide/architecture/#repository-pattern","title":"Repository Pattern","text":"<p>Objetivo: Abstrair acesso a dados e servi\u00e7os externos.</p> <p>Implementa\u00e7\u00e3o:</p> <pre><code># Interface (application/interfaces/)\nclass DownloadDocsCVMRepository(ABC):\n    @abstractmethod\n    def download_docs(self, ...) -&gt; DownloadResultCVM:\n        pass\n\n# Implementa\u00e7\u00e3o concreta (infra/adapters/)\nclass AsyncDownloadAdapterCVM(DownloadDocsCVMRepository):\n    def download_docs(self, ...) -&gt; DownloadResultCVM:\n        # Implementa\u00e7\u00e3o real\n        pass\n</code></pre> <p>Benef\u00edcios:</p> <ul> <li>F\u00e1cil troca de implementa\u00e7\u00f5es</li> <li>Testabilidade (mocking)</li> <li>Desacoplamento</li> </ul>"},{"location":"dev-guide/architecture/#use-case-pattern","title":"Use Case Pattern","text":"<p>Objetivo: Encapsular l\u00f3gica de neg\u00f3cio em casos de uso espec\u00edficos.</p> <p>Implementa\u00e7\u00e3o:</p> <pre><code>class DownloadDocumentsUseCaseCVM:\n    def __init__(self, repository: DownloadDocsCVMRepository):\n        self.__repository = repository\n\n    def execute(self, ...):\n        # Orquestrar opera\u00e7\u00e3o\n        pass\n</code></pre> <p>Benef\u00edcios:</p> <ul> <li>L\u00f3gica de neg\u00f3cio centralizada</li> <li>Reutiliz\u00e1vel</li> <li>Test\u00e1vel</li> </ul>"},{"location":"dev-guide/architecture/#result-pattern","title":"Result Pattern","text":"<p>Objetivo: Encapsular resultados de opera\u00e7\u00f5es com sucesso e erros.</p> <p>Implementa\u00e7\u00e3o:</p> <pre><code>@dataclass\nclass DownloadResultCVM:\n    success_count_downloads: int\n    error_count_downloads: int\n    successful_downloads: Dict[str, List[int]]\n    failed_downloads: Dict[str, str]\n\n    def has_errors(self) -&gt; bool:\n        return self.error_count_downloads &gt; 0\n</code></pre> <p>Benef\u00edcios:</p> <ul> <li>Tratamento de erros expl\u00edcito</li> <li>Informa\u00e7\u00f5es detalhadas</li> <li>Type-safe</li> </ul>"},{"location":"dev-guide/architecture/#value-object-pattern","title":"Value Object Pattern","text":"<p>Objetivo: Objetos imut\u00e1veis que representam valores de dom\u00ednio.</p> <p>Implementa\u00e7\u00e3o:</p> <pre><code>class DictZipsToDownload:\n    def get_dict_zips_to_download(self, list_docs, initial_year, last_year):\n        # Gera estrutura imut\u00e1vel de URLs\n        return {doc: [year1, year2, ...] for doc in list_docs}\n</code></pre> <p>Benef\u00edcios:</p> <ul> <li>Imutabilidade</li> <li>Valida\u00e7\u00e3o encapsulada</li> <li>Reutiliz\u00e1vel</li> </ul>"},{"location":"dev-guide/architecture/#fluxo-de-dados","title":"Fluxo de Dados","text":""},{"location":"dev-guide/architecture/#download-de-documentos-cvm","title":"Download de Documentos CVM","text":"<pre><code>graph TD\n    A[FundamentalStocksDataCVM] --&gt;|1. Chamar download| B[DownloadDocumentsUseCaseCVM]\n    B --&gt;|2. Validar inputs| C[AvailableDocs/AvailableYears]\n    B --&gt;|3. Gerar URLs| D[DictZipsToDownload]\n    B --&gt;|4. Executar download| E[AsyncDownloadAdapterCVM]\n    E --&gt;|5. HTTP requests| F[Servidor CVM]\n    E --&gt;|6. Salvar arquivos| G[Sistema de Arquivos]\n    E --&gt;|7. Retornar resultado| B\n    B --&gt;|8. Retornar resultado| A\n    A --&gt;|9. Formatar sa\u00edda| H[DownloadResultFormatter]\n</code></pre>"},{"location":"dev-guide/architecture/#extracao-de-cotacoes-b3","title":"Extra\u00e7\u00e3o de Cota\u00e7\u00f5es B3","text":"<pre><code>graph TD\n    A[HistoricalQuotesB3] --&gt;|1. Chamar extract| B[ExtractHistoricalQuotesUseCaseB3]\n    B --&gt;|2. Validar inputs| C[AvailableAssets/AvailableYears]\n    B --&gt;|3. Criar lista de docs| D[CreateDocsToExtractUseCaseB3]\n    D --&gt;|4. Retornar DocsToExtractorB3| B\n    B --&gt;|5. Executar extra\u00e7\u00e3o| E[ExtractHistoricalQuotesUseCaseB3]\n    E --&gt;|6. Ler ZIPs| F[Sistema de Arquivos]\n    E --&gt;|7. Processar dados| G[Polars/Pandas]\n    E --&gt;|8. Escrever Parquet| H[Sistema de Arquivos]\n    E --&gt;|9. Retornar resultado| B\n    B --&gt;|10. Retornar resultado| A\n    A --&gt;|11. Formatar sa\u00edda| I[ExtractionResultFormatter]\n</code></pre>"},{"location":"dev-guide/architecture/#principios-solid","title":"Princ\u00edpios SOLID","text":""},{"location":"dev-guide/architecture/#single-responsibility-principle-srp","title":"Single Responsibility Principle (SRP)","text":"<p>Cada classe tem uma \u00fanica responsabilidade:</p> <ul> <li><code>FundamentalStocksDataCVM</code>: Interface p\u00fablica</li> <li><code>DownloadDocumentsUseCaseCVM</code>: Orquestra\u00e7\u00e3o de download</li> <li><code>AsyncDownloadAdapterCVM</code>: Implementa\u00e7\u00e3o de download</li> <li><code>AvailableDocs</code>: Valida\u00e7\u00e3o de documentos</li> </ul>"},{"location":"dev-guide/architecture/#openclosed-principle-ocp","title":"Open/Closed Principle (OCP)","text":"<p>Aberto para extens\u00e3o, fechado para modifica\u00e7\u00e3o:</p> <pre><code># F\u00e1cil adicionar novo adapter sem modificar c\u00f3digo existente\nclass NewDownloadAdapter(DownloadDocsCVMRepository):\n    def download_docs(self, ...):\n        # Nova implementa\u00e7\u00e3o\n        pass\n\n# Uso\nnew_adapter = NewDownloadAdapter()\nuse_case = DownloadDocumentsUseCaseCVM(new_adapter)\n</code></pre>"},{"location":"dev-guide/architecture/#liskov-substitution-principle-lsp","title":"Liskov Substitution Principle (LSP)","text":"<p>Subtipos podem substituir tipos base:</p> <pre><code># Qualquer implementa\u00e7\u00e3o de DownloadDocsCVMRepository pode ser usada\nadapter: DownloadDocsCVMRepository = AsyncDownloadAdapterCVM()\n# ou\nadapter: DownloadDocsCVMRepository = AsyncDownloadAdapterCVM()\n# ou\nadapter: DownloadDocsCVMRepository = AsyncDownloadAdapterCVM()\n\nuse_case = DownloadDocumentsUseCaseCVM(adapter)\n</code></pre>"},{"location":"dev-guide/architecture/#interface-segregation-principle-isp","title":"Interface Segregation Principle (ISP)","text":"<p>Interfaces espec\u00edficas e focadas:</p> <pre><code># Interface espec\u00edfica para download\nclass DownloadDocsCVMRepository(ABC):\n    @abstractmethod\n    def download_docs(self, ...) -&gt; DownloadResultCVM:\n        pass\n\n# Interface espec\u00edfica para extra\u00e7\u00e3o\nclass FileExtractorRepository(ABC):\n    @abstractmethod\n    def extract_to_parquet(self, ...) -&gt; None:\n        pass\n</code></pre>"},{"location":"dev-guide/architecture/#dependency-inversion-principle-dip","title":"Dependency Inversion Principle (DIP)","text":"<p>Depender de abstra\u00e7\u00f5es, n\u00e3o de implementa\u00e7\u00f5es:</p> <pre><code># Use case depende de interface, n\u00e3o de implementa\u00e7\u00e3o concreta\nclass DownloadDocumentsUseCaseCVM:\n    def __init__(self, repository: DownloadDocsCVMRepository):  # Abstra\u00e7\u00e3o\n        self.__repository = repository\n</code></pre>"},{"location":"dev-guide/architecture/#extensibilidade","title":"Extensibilidade","text":""},{"location":"dev-guide/architecture/#adicionar-novo-adapter-de-download","title":"Adicionar Novo Adapter de Download","text":"<ol> <li>Criar classe que implementa <code>DownloadDocsCVMRepository</code>:</li> </ol> <pre><code>class MyCustomAdapter(DownloadDocsCVMRepository):\n    def download_docs(self, destination_path, dict_zip_to_download):\n        # Sua implementa\u00e7\u00e3o\n        return DownloadResultCVM(...)\n</code></pre> <ol> <li>Usar no use case:</li> </ol> <pre><code>adapter = MyCustomAdapter()\nuse_case = DownloadDocumentsUseCaseCVM(adapter)\n</code></pre>"},{"location":"dev-guide/architecture/#adicionar-nova-fonte-de-dados","title":"Adicionar Nova Fonte de Dados","text":"<ol> <li>Criar estrutura de dom\u00ednio</li> <li>Criar use cases</li> <li>Criar adapters</li> <li>Criar interface p\u00fablica em <code>application/</code></li> </ol>"},{"location":"dev-guide/architecture/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>\ud83d\udcd6 Refer\u00eancia da API - Documenta\u00e7\u00e3o completa da API</li> <li>\ud83e\udd1d Como Contribuir - Guia para contribuidores</li> <li>\ud83e\uddea Testes - Como escrever e executar testes</li> <li>\ud83d\udd27 Uso Avan\u00e7ado - Customiza\u00e7\u00e3o e extens\u00f5es</li> </ul>"},{"location":"dev-guide/contributing/","title":"Como Contribuir","text":"<p>Guia para contribuir com o projeto Global-Data-Finance.</p>"},{"location":"dev-guide/contributing/#configurando-ambiente-de-desenvolvimento","title":"Configurando Ambiente de Desenvolvimento","text":""},{"location":"dev-guide/contributing/#1-fork-e-clone","title":"1. Fork e Clone","text":"<pre><code># Fork no GitHub, depois:\ngit clone https://github.com/jor0105/Global-Data-Finance.git\ncd Global-Data-Finance\n</code></pre>"},{"location":"dev-guide/contributing/#2-instalar-dependencias","title":"2. Instalar Depend\u00eancias","text":"<pre><code># Com Poetry (recomendado)\npoetry install\n\n# Ativar ambiente virtual\npoetry shell\n</code></pre>"},{"location":"dev-guide/contributing/#3-instalar-pre-commit-hooks","title":"3. Instalar Pre-commit Hooks","text":"<pre><code>pre-commit install\n</code></pre>"},{"location":"dev-guide/contributing/#padroes-de-codigo","title":"Padr\u00f5es de C\u00f3digo","text":""},{"location":"dev-guide/contributing/#style-guide","title":"Style Guide","text":"<ul> <li>Seguir PEP 8</li> <li>Usar type hints em todo c\u00f3digo</li> <li>Docstrings no formato Google Style</li> <li>M\u00e1ximo de 88 caracteres por linha (Black)</li> </ul>"},{"location":"dev-guide/contributing/#exemplo-de-docstring","title":"Exemplo de Docstring","text":"<pre><code>def download_docs(\n    self,\n    destination_path: str,\n    list_docs: Optional[List[str]] = None\n) -&gt; DownloadResultCVM:\n    \"\"\"Baixa documentos CVM.\n\n    Args:\n        destination_path: Diret\u00f3rio onde salvar arquivos.\n        list_docs: Lista de tipos de documentos. Se None, baixa todos.\n\n    Returns:\n        Objeto DownloadResultCVM com resultados do download.\n\n    Raises:\n        InvalidDocName: Se tipo de documento for inv\u00e1lido.\n        NetworkError: Se houver erro de rede.\n    \"\"\"\n    pass\n</code></pre>"},{"location":"dev-guide/contributing/#testes","title":"Testes","text":""},{"location":"dev-guide/contributing/#executar-testes","title":"Executar Testes","text":"<pre><code># Todos os testes\npytest\n\n# Com cobertura\npytest --cov=src\n\n# Apenas unit\u00e1rios\npytest -m unit\n</code></pre>"},{"location":"dev-guide/contributing/#escrever-testes","title":"Escrever Testes","text":"<pre><code>import pytest\nfrom globaldatafinance import FundamentalStocksDataCVM\n\n@pytest.mark.unit\nclass TestFundamentalStocksData:\n    def test_get_available_docs(self):\n        \"\"\"Testa obten\u00e7\u00e3o de documentos dispon\u00edveis.\"\"\"\n        cvm = FundamentalStocksDataCVM()\n        docs = cvm.get_available_docs()\n\n        assert isinstance(docs, dict)\n        assert \"DFP\" in docs\n        assert len(docs) &gt; 0\n</code></pre>"},{"location":"dev-guide/contributing/#workflow-git","title":"Workflow Git","text":""},{"location":"dev-guide/contributing/#branches","title":"Branches","text":"<ul> <li><code>main</code>: C\u00f3digo est\u00e1vel</li> <li><code>develop</code>: Desenvolvimento</li> <li><code>feature/nome-feature</code>: Novas funcionalidades</li> <li><code>fix/nome-bug</code>: Corre\u00e7\u00f5es de bugs</li> </ul>"},{"location":"dev-guide/contributing/#commits","title":"Commits","text":"<p>Use mensagens descritivas:</p> <pre><code># Bom\ngit commit -m \"feat: adiciona suporte a download paralelo\"\ngit commit -m \"fix: corrige erro de timeout em downloads grandes\"\n\n# Evite\ngit commit -m \"update\"\ngit commit -m \"fix bug\"\n</code></pre>"},{"location":"dev-guide/contributing/#pull-requests","title":"Pull Requests","text":"<ol> <li>Crie branch a partir de <code>develop</code></li> <li>Fa\u00e7a suas altera\u00e7\u00f5es</li> <li>Adicione testes</li> <li>Atualize documenta\u00e7\u00e3o</li> <li>Abra PR para <code>develop</code></li> </ol>"},{"location":"dev-guide/contributing/#checklist-de-pr","title":"Checklist de PR","text":"<ul> <li> C\u00f3digo segue PEP 8</li> <li> Type hints adicionados</li> <li> Docstrings completas</li> <li> Testes adicionados</li> <li> Testes passando</li> <li> Documenta\u00e7\u00e3o atualizada</li> <li> Pre-commit hooks passando</li> </ul>"},{"location":"dev-guide/contributing/#contato","title":"Contato","text":"<ul> <li>GitHub Issues: Abrir issue</li> <li>Email: estraliotojordan@gmail.com</li> </ul>"},{"location":"dev-guide/logging-system/","title":"Sistema de Logging","text":"<p>Documenta\u00e7\u00e3o completa do sistema de logging avan\u00e7ado do Global-Data-Finance.</p>"},{"location":"dev-guide/logging-system/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O Global-Data-Finance possui um sistema de logging centralizado e profissional que oferece:</p> <ul> <li>\u2705 Lazy initialization - Logging desabilitado por padr\u00e3o (biblioteca-friendly)</li> <li>\u2705 Console e arquivo - Handlers configur\u00e1veis</li> <li>\u2705 N\u00edveis customiz\u00e1veis - DEBUG, INFO, WARNING, ERROR, CRITICAL</li> <li>\u2705 Performance timing - Context managers para medir tempo de execu\u00e7\u00e3o</li> <li>\u2705 Structured logging - Logs com dados contextuais</li> <li>\u2705 Vari\u00e1veis de ambiente - Configura\u00e7\u00e3o via environment variables</li> </ul>"},{"location":"dev-guide/logging-system/#arquitetura","title":"Arquitetura","text":""},{"location":"dev-guide/logging-system/#componentes-principais","title":"Componentes Principais","text":"<pre><code>src/core/logging_config.py\n\u251c\u2500\u2500 setup_logging()           # Inicializa\u00e7\u00e3o do logging\n\u251c\u2500\u2500 get_logger()              # Obter logger por m\u00f3dulo\n\u251c\u2500\u2500 log_execution_time()      # Context manager para timing\n\u251c\u2500\u2500 log_with_context()        # Logging estruturado\n\u251c\u2500\u2500 LoggingSettings           # Configura\u00e7\u00f5es\n\u251c\u2500\u2500 StructuredFormatter       # Formatter customizado\n\u2514\u2500\u2500 ContextFilter             # Filtro de contexto\n</code></pre>"},{"location":"dev-guide/logging-system/#uso-basico","title":"Uso B\u00e1sico","text":""},{"location":"dev-guide/logging-system/#1-habilitar-logging","title":"1. Habilitar Logging","text":"<p>Por padr\u00e3o, o logging est\u00e1 desabilitado. Para habilitar:</p> <pre><code>from globaldatafinance.core import setup_logging\n\n# Habilitar logging com n\u00edvel INFO\nsetup_logging(level=\"INFO\")\n</code></pre>"},{"location":"dev-guide/logging-system/#2-obter-logger-em-um-modulo","title":"2. Obter Logger em um M\u00f3dulo","text":"<pre><code>from globaldatafinance.core import get_logger\n\nlogger = get_logger(__name__)\nlogger.info(\"Processamento iniciado\")\nlogger.debug(\"Detalhes de debug\")\nlogger.warning(\"Aviso importante\")\nlogger.error(\"Erro ocorreu\")\n</code></pre>"},{"location":"dev-guide/logging-system/#3-logging-estruturado","title":"3. Logging Estruturado","text":"<pre><code>logger.info(\n    \"Arquivo processado\",\n    extra={\n        \"filename\": \"data.csv\",\n        \"records\": 1000,\n        \"elapsed_ms\": 250\n    }\n)\n</code></pre> <p>Sa\u00edda:</p> <pre><code>2025-11-25 17:30:00 | INFO     | meu_modulo | Arquivo processado | filename=data.csv | records=1000 | elapsed_ms=250\n</code></pre>"},{"location":"dev-guide/logging-system/#configuracao","title":"Configura\u00e7\u00e3o","text":""},{"location":"dev-guide/logging-system/#niveis-de-log","title":"N\u00edveis de Log","text":"N\u00edvel Uso Exemplo DEBUG Informa\u00e7\u00f5es detalhadas para debugging Valores de vari\u00e1veis, fluxo de execu\u00e7\u00e3o INFO Confirma\u00e7\u00e3o de funcionamento normal \u201cDownload iniciado\u201d, \u201cArquivo salvo\u201d WARNING Alerta de situa\u00e7\u00e3o inesperada \u201cArquivo j\u00e1 existe\u201d, \u201cTimeout, tentando novamente\u201d ERROR Erro que n\u00e3o impede execu\u00e7\u00e3o \u201cFalha ao baixar arquivo X\u201d CRITICAL Erro grave que pode parar aplica\u00e7\u00e3o \u201cDisco cheio\u201d, \u201cSem mem\u00f3ria\u201d"},{"location":"dev-guide/logging-system/#configuracao-via-codigo","title":"Configura\u00e7\u00e3o via C\u00f3digo","text":"<pre><code>from globaldatafinance.core import setup_logging\n\n# Configura\u00e7\u00e3o b\u00e1sica\nsetup_logging(level=\"INFO\")\n\n# Com arquivo de log\nsetup_logging(\n    level=\"DEBUG\",\n    log_file=\"/var/log/datafin.log\"\n)\n\n# Formato detalhado (com linhas e fun\u00e7\u00f5es)\nsetup_logging(\n    level=\"DEBUG\",\n    use_detailed_format=True\n)\n</code></pre>"},{"location":"dev-guide/logging-system/#configuracao-via-variaveis-de-ambiente","title":"Configura\u00e7\u00e3o via Vari\u00e1veis de Ambiente","text":"<pre><code># N\u00edvel de log\nexport DATAFIN_LOG_LEVEL=DEBUG\n\n# Arquivo de log\nexport DATAFIN_LOG_FILE=/var/log/datafin.log\n\n# Formato detalhado\nexport DATAFIN_LOG_DETAILED_FORMAT=true\n\n# Structured logging (JSON - futuro)\nexport DATAFIN_LOG_STRUCTURED=true\n</code></pre> <pre><code>from globaldatafinance.core import setup_logging\n\n# Usa configura\u00e7\u00f5es das vari\u00e1veis de ambiente\nsetup_logging()\n</code></pre>"},{"location":"dev-guide/logging-system/#recursos-avancados","title":"Recursos Avan\u00e7ados","text":""},{"location":"dev-guide/logging-system/#performance-timing","title":"Performance Timing","text":"<p>Use o context manager <code>log_execution_time()</code> para medir tempo de opera\u00e7\u00f5es:</p> <pre><code>from globaldatafinance.core import log_execution_time, get_logger\n\nlogger = get_logger(__name__)\n\nwith log_execution_time(logger, \"Parse ZIP file\", filename=\"data.zip\"):\n    parse_file(\"data.zip\")\n</code></pre> <p>Sa\u00edda:</p> <pre><code>Starting: Parse ZIP file | operation=Parse ZIP file | filename=data.zip\nCompleted: Parse ZIP file | operation=Parse ZIP file | elapsed_seconds=2.45 | filename=data.zip\n</code></pre> <p>Se ocorrer erro:</p> <pre><code>Failed: Parse ZIP file | operation=Parse ZIP file | elapsed_seconds=1.23 | error=File not found | filename=data.zip\n</code></pre>"},{"location":"dev-guide/logging-system/#logging-com-contexto","title":"Logging com Contexto","text":"<pre><code>from globaldatafinance.core import log_with_context, get_logger\n\nlogger = get_logger(__name__)\n\nlog_with_context(\n    logger,\n    \"info\",\n    \"Download conclu\u00eddo\",\n    url=\"https://example.com/file.zip\",\n    size_mb=125.5,\n    duration_seconds=45\n)\n</code></pre>"},{"location":"dev-guide/logging-system/#verificar-se-logging-esta-configurado","title":"Verificar se Logging est\u00e1 Configurado","text":"<pre><code>from globaldatafinance.core import is_logging_configured, setup_logging\n\nif not is_logging_configured():\n    setup_logging(level=\"INFO\")\n</code></pre>"},{"location":"dev-guide/logging-system/#obter-configuracoes-atuais","title":"Obter Configura\u00e7\u00f5es Atuais","text":"<pre><code>from globaldatafinance.core import get_logging_settings\n\nsettings = get_logging_settings()\nprint(f\"N\u00edvel atual: {settings.level}\")\nprint(f\"Arquivo de log: {settings.log_file}\")\nprint(f\"Formato detalhado: {settings.detailed_format}\")\n</code></pre>"},{"location":"dev-guide/logging-system/#exemplos-praticos","title":"Exemplos Pr\u00e1ticos","text":""},{"location":"dev-guide/logging-system/#exemplo-1-logging-em-aplicacao","title":"Exemplo 1: Logging em Aplica\u00e7\u00e3o","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\nfrom globaldatafinance.core import setup_logging, get_logger\n\n# Habilitar logging\nsetup_logging(level=\"INFO\", log_file=\"app.log\")\n\nlogger = get_logger(__name__)\nlogger.info(\"Aplica\u00e7\u00e3o iniciada\")\n\n# Usar a biblioteca\ncvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"/data/cvm\",\n    list_docs=[\"DFP\"],\n    initial_year=2023\n)\n\nlogger.info(\"Aplica\u00e7\u00e3o finalizada\")\n</code></pre>"},{"location":"dev-guide/logging-system/#exemplo-2-debug-de-problemas","title":"Exemplo 2: Debug de Problemas","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\nfrom globaldatafinance.core import setup_logging\n\n# N\u00edvel DEBUG para troubleshooting\nsetup_logging(\n    level=\"DEBUG\",\n    log_file=\"/tmp/debug.log\",\n    use_detailed_format=True  # Inclui linhas e fun\u00e7\u00f5es\n)\n\nb3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2023\n)\n</code></pre>"},{"location":"dev-guide/logging-system/#exemplo-3-logging-customizado-em-modulo-proprio","title":"Exemplo 3: Logging Customizado em M\u00f3dulo Pr\u00f3prio","text":"<pre><code># meu_script.py\nfrom globaldatafinance import FundamentalStocksDataCVM\nfrom globaldatafinance.core import (\n    setup_logging,\n    get_logger,\n    log_execution_time\n)\n\n# Configurar logging\nsetup_logging(level=\"INFO\")\n\n# Criar logger para este m\u00f3dulo\nlogger = get_logger(__name__)\n\ndef processar_dados():\n    logger.info(\"Iniciando processamento\")\n\n    with log_execution_time(logger, \"Download CVM\"):\n        cvm = FundamentalStocksDataCVM()\n        cvm.download(\n            destination_path=\"/data/cvm\",\n            list_docs=[\"DFP\"],\n            initial_year=2023\n        )\n\n    logger.info(\"Processamento conclu\u00eddo\")\n\nif __name__ == \"__main__\":\n    processar_dados()\n</code></pre>"},{"location":"dev-guide/logging-system/#formatos-de-log","title":"Formatos de Log","text":""},{"location":"dev-guide/logging-system/#formato-padrao","title":"Formato Padr\u00e3o","text":"<pre><code>2025-11-25 17:30:00 | INFO     | m\u00f3dulo.nome | Mensagem de log\n</code></pre>"},{"location":"dev-guide/logging-system/#formato-detalhado","title":"Formato Detalhado","text":"<p>Inclui n\u00famero de linha e nome da fun\u00e7\u00e3o:</p> <pre><code>2025-11-25 17:30:00 | INFO     | m\u00f3dulo.nome:123 | fun\u00e7\u00e3o_nome | Mensagem de log\n</code></pre>"},{"location":"dev-guide/logging-system/#formato-com-dados-contextuais","title":"Formato com Dados Contextuais","text":"<pre><code>2025-11-25 17:30:00 | INFO     | m\u00f3dulo | Mensagem | campo1=valor1 | campo2=valor2\n</code></pre>"},{"location":"dev-guide/logging-system/#boas-praticas","title":"Boas Pr\u00e1ticas","text":""},{"location":"dev-guide/logging-system/#1-sempre-use-get_logger__name__","title":"1. Sempre use <code>get_logger(__name__)</code>","text":"<pre><code># \u2705 Correto - hierarquia de nomes\nlogger = get_logger(__name__)\n\n# \u274c Evite - nome hardcoded\nlogger = get_logger(\"meu_logger\")\n</code></pre>"},{"location":"dev-guide/logging-system/#2-use-niveis-apropriados","title":"2. Use N\u00edveis Apropriados","text":"<pre><code># \u2705 Correto\nlogger.debug(\"Valor da vari\u00e1vel x: %s\", x)\nlogger.info(\"Download iniciado\")\nlogger.warning(\"Arquivo j\u00e1 existe, pulando\")\nlogger.error(\"Falha ao processar arquivo\", exc_info=True)\n\n# \u274c Evite - n\u00edvel errado\nlogger.info(\"Valor de debug: %s\", x)  # Use DEBUG\nlogger.error(\"Arquivo processado\")     # Use INFO\n</code></pre>"},{"location":"dev-guide/logging-system/#3-use-structured-logging","title":"3. Use Structured Logging","text":"<pre><code># \u2705 Correto - dados estruturados\nlogger.info(\n    \"Arquivo processado\",\n    extra={\"filename\": \"data.csv\", \"size_mb\": 10.5}\n)\n\n# \u274c Evite - string interpolation\nlogger.info(f\"Arquivo data.csv processado, tamanho: 10.5 MB\")\n</code></pre>"},{"location":"dev-guide/logging-system/#4-use-context-manager-para-timing","title":"4. Use Context Manager para Timing","text":"<pre><code># \u2705 Correto - medi\u00e7\u00e3o autom\u00e1tica\nwith log_execution_time(logger, \"Download\"):\n    download_files()\n\n# \u274c Evite - medi\u00e7\u00e3o manual\nstart = time.time()\ndownload_files()\nlogger.info(f\"Levou {time.time() - start}s\")\n</code></pre>"},{"location":"dev-guide/logging-system/#troubleshooting","title":"Troubleshooting","text":""},{"location":"dev-guide/logging-system/#nao-vejo-nenhum-log","title":"N\u00e3o vejo nenhum log","text":"<pre><code># Certifique-se de chamar setup_logging()\nfrom globaldatafinance.core import setup_logging\nsetup_logging(level=\"INFO\")\n</code></pre>"},{"location":"dev-guide/logging-system/#logs-duplicados","title":"Logs duplicados","text":"<pre><code># N\u00e3o chame setup_logging() m\u00faltiplas vezes\n# Se precisar reconfigurar, \u00e9 seguro chamar novamente\nsetup_logging(level=\"DEBUG\")  # Reconfigura\n</code></pre>"},{"location":"dev-guide/logging-system/#logging-em-arquivo-nao-funciona","title":"Logging em arquivo n\u00e3o funciona","text":"<pre><code># Verifique permiss\u00f5es do diret\u00f3rio\nsetup_logging(level=\"INFO\", log_file=\"/var/log/app.log\")\n\n# Se n\u00e3o tiver permiss\u00e3o, use /tmp ou diret\u00f3rio home\nsetup_logging(level=\"INFO\", log_file=\"/tmp/app.log\")\n</code></pre>"},{"location":"dev-guide/logging-system/#referencias","title":"Refer\u00eancias","text":"<ul> <li>Documenta\u00e7\u00e3o Oficial Python Logging</li> <li>Logging Best Practices</li> <li>Structured Logging</li> </ul> <p>Veja tamb\u00e9m:</p> <ul> <li>Configura\u00e7\u00e3o - Configura\u00e7\u00f5es globais</li> <li>Advanced Usage - Uso avan\u00e7ado do sistema</li> </ul>"},{"location":"dev-guide/resource-monitoring/","title":"Resource Monitoring","text":"<p>Documenta\u00e7\u00e3o do sistema de monitoramento de recursos do Global-Data-Finance.</p>"},{"location":"dev-guide/resource-monitoring/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O <code>ResourceMonitor</code> \u00e9 um sistema avan\u00e7ado de monitoramento de CPU e mem\u00f3ria que:</p> <ul> <li>\u2705 Singleton: Uma \u00fanica inst\u00e2ncia global</li> <li>\u2705 Autom\u00e1tico: Ajusta workers e batch sizes baseado em recursos dispon\u00edveis</li> <li>\u2705 Circuit Breaker: Para opera\u00e7\u00f5es quando recursos est\u00e3o cr\u00edticos</li> <li>\u2705 Garbage Collection: GC autom\u00e1tico quando mem\u00f3ria est\u00e1 alta</li> </ul>"},{"location":"dev-guide/resource-monitoring/#estados-de-recursos","title":"Estados de Recursos","text":"Estado Descri\u00e7\u00e3o A\u00e7\u00e3o HEALTHY Recursos normais Nenhuma a\u00e7\u00e3o necess\u00e1ria WARNING Recursos acima de 70-80% Considera ativar GC CRITICAL Recursos acima de 85-90% Reduz workers/batch, for\u00e7a GC EXHAUSTED Recursos acima de 95% Ativa circuit breaker"},{"location":"dev-guide/resource-monitoring/#configuracao","title":"Configura\u00e7\u00e3o","text":""},{"location":"dev-guide/resource-monitoring/#resourcelimits","title":"ResourceLimits","text":"<pre><code>from globaldatafinance.core.utils.resource_monitor import ResourceLimits\n\nlimits = ResourceLimits(\n    memory_warning_threshold=70.0,      # % de mem\u00f3ria para WARNING\n    memory_critical_threshold=85.0,     # % de mem\u00f3ria para CRITICAL\n    memory_exhausted_threshold=95.0,    # % de mem\u00f3ria para EXHAUSTED\n    cpu_warning_threshold=80.0,         # % de CPU para WARNING\n    cpu_critical_threshold=90.0,        # % de CPU para CRITICAL\n    min_free_memory_mb=100,             # MB m\u00ednimo de mem\u00f3ria livre\n    auto_gc_on_warning=True,            # GC autom\u00e1tico em WARNING\n    circuit_breaker_cooldown_seconds=10,# Cooldown do circuit breaker\n    circuit_breaker_enabled=True        # Habilitar circuit breaker\n)\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#api","title":"API","text":""},{"location":"dev-guide/resource-monitoring/#criar-instancia-singleton","title":"Criar Inst\u00e2ncia (Singleton)","text":"<pre><code>from globaldatafinance.core.utils.resource_monitor import ResourceMonitor\n\n# Obter inst\u00e2ncia (sempre a mesma)\nmonitor = ResourceMonitor()\n\n# Ou com limites customizados\nlimits = ResourceLimits(memory_warning_threshold=60.0)\nmonitor = ResourceMonitor(limits)\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#verificar-estado-atual","title":"Verificar Estado atual","text":"<pre><code>state = monitor.check_resources()\nprint(state)  # HEALTHY, WARNING, CRITICAL, ou EXHAUSTED\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#calcular-workers-seguros","title":"Calcular Workers Seguros","text":"<pre><code># N\u00famero seguro de workers baseado em recursos\nsafe_workers = monitor.get_safe_worker_count(max_workers=16)\nprint(f\"Usando {safe_workers} workers\")\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#calcular-batch-size-seguro","title":"Calcular Batch Size Seguro","text":"<pre><code># Tamanho de batch seguro baseado em mem\u00f3ria\nsafe_batch = monitor.get_safe_batch_size(desired_batch_size=10000)\nprint(f\"Batch size: {safe_batch}\")\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#aguardar-recursos-disponiveis","title":"Aguardar Recursos Dispon\u00edveis","text":"<pre><code>from globaldatafinance.core.utils.resource_monitor import ResourceState\n\n# Aguardar at\u00e9 que recursos melhorem\nsuccess = monitor.wait_for_resources(\n    required_state=ResourceState.WARNING,\n    timeout_seconds=60\n)\n\nif success:\n    print(\"Recursos dispon\u00edveis\")\nelse:\n    print(\"Timeout aguardando recursos\")\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#memoria-do-processo-atual","title":"Mem\u00f3ria do Processo Atual","text":"<pre><code>memory_mb = monitor.get_process_memory_mb()\nprint(f\"Processo usando {memory_mb:.2f} MB\")\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#uso-automatico-nos-adapters","title":"Uso Autom\u00e1tico nos Adapters","text":"<p>O <code>ResourceMonitor</code> \u00e9 usado automaticamente pelos adapters de download:</p> <pre><code># AsyncDownloadAdapterCVM usa ResourceMonitor para:\n# - Ajustar n\u00famero de workers dinamicamente\n# - Reduzir batch size quando mem\u00f3ria est\u00e1 alta\n# - Pausar downloads quando recursos cr\u00edticos\n\ncvm = FundamentalStocksDataCVM()\ncvm.download(...)  # Resource monitoring autom\u00e1tico\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#exemplo-manual","title":"Exemplo Manual","text":"<pre><code>from globaldatafinance.core.utils.resource_monitor import (\n    ResourceMonitor,\n    ResourceState\n)\n\nmonitor = ResourceMonitor()\n\n# Checar antes de opera\u00e7\u00e3o pesada\nstate = monitor.check_resources()\n\nif state == ResourceState.EXHAUSTED:\n    print(\"Recursos cr\u00edticos! Aguardando...\")\n    monitor.wait_for_resources(timeout_seconds=120)\n\n# Ajustar workers baseado em recursos\nworkers = monitor.get_safe_worker_count(max_workers=16)\nprocess_data(workers=workers)\n\n# Verificar mem\u00f3ria do processo\nmemory = monitor.get_process_memory_mb()\nprint(f\"Processo usando {memory:.2f} MB\")\n</code></pre>"},{"location":"dev-guide/resource-monitoring/#dependencia","title":"Depend\u00eancia","text":"<p>Requer <code>psutil</code>:</p> <pre><code>pip install psutil\n</code></pre> <p>Se <code>psutil</code> n\u00e3o estiver dispon\u00edvel, o monitor funciona em modo degradado (sempre retorna HEALTHY).</p> <p>Veja tamb\u00e9m:</p> <ul> <li>Retry Strategy</li> <li>Advanced Usage</li> </ul>"},{"location":"dev-guide/retry-strategy/","title":"Retry Strategy","text":"<p>Documenta\u00e7\u00e3o da estrat\u00e9gia de retry do Global-Data-Finance.</p>"},{"location":"dev-guide/retry-strategy/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A classe <code>RetryStrategy</code> determina quais exce\u00e7\u00f5es garantem retry e calcula o tempo de backoff exponencial.</p>"},{"location":"dev-guide/retry-strategy/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>\u2705 Inteligente: Apenas retries em erros transientes</li> <li>\u2705 Backoff Exponencial: Aumenta tempo de espera progressivamente</li> <li>\u2705 Configur\u00e1vel: Backoff inicial, m\u00e1ximo e multiplicador customiz\u00e1veis</li> <li>\u2705 Type-safe: Usa hierarquia de exce\u00e7\u00f5es do projeto</li> </ul>"},{"location":"dev-guide/retry-strategy/#excecoes-retryable","title":"Exce\u00e7\u00f5es Retryable","text":""},{"location":"dev-guide/retry-strategy/#sempre-retryable","title":"Sempre Retryable","text":"<ul> <li><code>NetworkError</code> - Erros de rede</li> <li><code>TimeoutError</code> - Timeout de requisi\u00e7\u00f5es</li> </ul>"},{"location":"dev-guide/retry-strategy/#baseado-em-mensagem","title":"Baseado em Mensagem","text":"<p>Erros com keywords retry\u00e1veis na mensagem:</p> <ul> <li><code>\"timeout\"</code></li> <li><code>\"connection refused\"</code></li> <li><code>\"connection reset\"</code></li> <li><code>\"connection aborted\"</code></li> <li><code>\"temporarily\"</code></li> <li><code>\"unavailable\"</code></li> <li><code>\"try again\"</code></li> </ul>"},{"location":"dev-guide/retry-strategy/#nunca-retryable","title":"Nunca Retryable","text":"<ul> <li><code>PathPermissionError</code> - Sem permiss\u00e3o</li> <li><code>DiskFullError</code> - Disco cheio</li> <li><code>ValueError</code> - Erro de valida\u00e7\u00e3o</li> </ul>"},{"location":"dev-guide/retry-strategy/#api","title":"API","text":""},{"location":"dev-guide/retry-strategy/#criar-instancia","title":"Criar Inst\u00e2ncia","text":"<pre><code>from globaldatafinance.core.utils.retry_strategy import RetryStrategy\n\nstrategy = RetryStrategy(\n    initial_backoff=1.0,    # Backoff inicial (segundos)\n    max_backoff=60.0,       # Backoff m\u00e1ximo (segundos)\n    multiplier=2.0          # Multiplicador exponencial\n)\n</code></pre>"},{"location":"dev-guide/retry-strategy/#verificar-se-excecao-e-retryable","title":"Verificar se Exce\u00e7\u00e3o \u00e9 Retryable","text":"<pre><code>from globaldatafinance.macro_exceptions import NetworkError\n\ntry:\n    download_file()\nexcept Exception as e:\n    if strategy.is_retryable(e):\n        print(\"Erro retryable, tentando novamente\")\n    else:\n        print(\"Erro n\u00e3o-retryable, parando\")\n        raise\n</code></pre>"},{"location":"dev-guide/retry-strategy/#calcular-backoff","title":"Calcular Backoff","text":"<pre><code># Calcula tempo de espera para cada tentativa\nfor retry_count in range(3):\n    backoff = strategy.calculate_backoff(retry_count)\n    print(f\"Tentativa {retry_count + 1}: esperar {backoff}s\")\n</code></pre> <p>Sa\u00edda (initial=1.0, multiplier=2.0):</p> <pre><code>Tentativa 1: esperar 1.0s\nTentativa 2: esperar 2.0s\nTentativa 3: esperar 4.0s\n</code></pre>"},{"location":"dev-guide/retry-strategy/#exemplo-de-uso","title":"Exemplo de Uso","text":""},{"location":"dev-guide/retry-strategy/#retry-manual-com-backoff","title":"Retry Manual com Backoff","text":"<pre><code>from globaldatafinance.core.utils.retry_strategy import RetryStrategy\nfrom globaldatafinance.macro_exceptions import NetworkError\nimport time\n\nstrategy = RetryStrategy(\n    initial_backoff=1.0,\n    max_backoff=30.0,\n    multiplier=2.0\n)\n\nmax_retries = 3\n\nfor attempt in range(max_retries):\n    try:\n        result = download_file()\n        break  # Sucesso\n    except Exception as e:\n        if not strategy.is_retryable(e):\n            raise  # Erro n\u00e3o-retryable\n\n        if attempt &lt; max_retries - 1:\n            backoff = strategy.calculate_backoff(attempt)\n            print(f\"Tentativa {attempt + 1} falhou. Aguardando {backoff}s...\")\n            time.sleep(backoff)\n        else:\n            raise  # Esgotou tentativas\n</code></pre>"},{"location":"dev-guide/retry-strategy/#uso-automatico-nos-adapters","title":"Uso Autom\u00e1tico nos Adapters","text":"<p>Os adapters de download usam <code>RetryStrategy</code> automaticamente:</p> <pre><code># AsyncDownloadAdapterCVM j\u00e1 implementa retry com backoff\ncvm = FundamentalStocksDataCVM()\ncvm.download(...)  # Retry autom\u00e1tico em erros de rede\n</code></pre> <p>O adapter faz:</p> <ol> <li>Tenta download</li> <li>Se falhar, verifica se \u00e9 retryable</li> <li>Calcula backoff</li> <li>Aguarda e tenta novamente</li> <li>Repete at\u00e9 max_retries ou sucesso</li> </ol>"},{"location":"dev-guide/retry-strategy/#configuracao-de-retry","title":"Configura\u00e7\u00e3o de Retry","text":"<p>Via configura\u00e7\u00e3o global:</p> <pre><code># M\u00e1ximo de retries\nexport DATAFINANCE_NETWORK_MAX_RETRIES=5\n\n# Multiplicador de backoff\nexport DATAFINANCE_NETWORK_RETRY_BACKOFF=2.0\n</code></pre>"},{"location":"dev-guide/retry-strategy/#excecoes-do-projeto","title":"Exce\u00e7\u00f5es do Projeto","text":"<p>O <code>RetryStrategy</code> usa as exce\u00e7\u00f5es definidas em <code>macro_exceptions</code>:</p> <pre><code>from globaldatafinance.macro_exceptions import (\n    NetworkError,          # Erro de rede\n    TimeoutError,          # Timeout\n    PathPermissionError,   # Sem permiss\u00e3o\n    DiskFullError          # Disco cheio\n)\n</code></pre> <p>Veja tamb\u00e9m:</p> <ul> <li>Exce\u00e7\u00f5es</li> <li>Configuration</li> <li>Advanced Usage</li> </ul>"},{"location":"dev-guide/testing/","title":"Testes","text":"<p>Guia completo sobre testes no Global-Data-Finance.</p>"},{"location":"dev-guide/testing/#estrutura-de-testes","title":"Estrutura de Testes","text":"<pre><code>tests/\n\u251c\u2500\u2500 brazil/\n\u2502   \u251c\u2500\u2500 b3_data/\n\u2502   \u2502   \u2514\u2500\u2500 historical_quotes/\n\u2502   \u2502       \u251c\u2500\u2500 domain/\n\u2502   \u2502       \u251c\u2500\u2500 application/\n\u2502   \u2502       \u2514\u2500\u2500 infra/\n\u2502   \u2514\u2500\u2500 cvm/\n\u2502       \u2514\u2500\u2500 fundamental_stocks_data/\n\u2502           \u251c\u2500\u2500 domain/\n\u2502           \u251c\u2500\u2500 application/\n\u2502           \u2514\u2500\u2500 infra/\n\u2514\u2500\u2500 macro_exceptions/\n</code></pre>"},{"location":"dev-guide/testing/#executando-testes","title":"Executando Testes","text":""},{"location":"dev-guide/testing/#todos-os-testes","title":"Todos os Testes","text":"<pre><code>pytest\n</code></pre>"},{"location":"dev-guide/testing/#com-cobertura","title":"Com Cobertura","text":"<pre><code>pytest --cov=src --cov-report=html\n</code></pre>"},{"location":"dev-guide/testing/#marcadores","title":"Marcadores","text":"<pre><code># Apenas testes unit\u00e1rios\npytest -m unit\n\n# Apenas testes de integra\u00e7\u00e3o\npytest -m integration\n\n# Pular testes lentos\npytest -m \"not slow\"\n\n# Pular testes que precisam de rede\npytest -m \"not requires_network\"\n</code></pre>"},{"location":"dev-guide/testing/#escrevendo-testes","title":"Escrevendo Testes","text":""},{"location":"dev-guide/testing/#teste-unitario","title":"Teste Unit\u00e1rio","text":"<pre><code>import pytest\nfrom globaldatafinance.brazil.cvm.fundamental_stocks_data.domain import AvailableDocs\nfrom globaldatafinance.brazil.cvm.fundamental_stocks_data.exceptions import InvalidDocName\n\n@pytest.mark.unit\nclass TestAvailableDocs:\n    def test_validate_valid_doc(self):\n        \"\"\"Testa valida\u00e7\u00e3o de documento v\u00e1lido.\"\"\"\n        docs = AvailableDocs()\n        docs.validate_docs_name(\"DFP\")  # N\u00e3o deve lan\u00e7ar exce\u00e7\u00e3o\n\n    def test_validate_invalid_doc(self):\n        \"\"\"Testa valida\u00e7\u00e3o de documento inv\u00e1lido.\"\"\"\n        docs = AvailableDocs()\n        with pytest.raises(InvalidDocName):\n            docs.validate_docs_name(\"INVALID\")\n</code></pre>"},{"location":"dev-guide/testing/#teste-de-integracao","title":"Teste de Integra\u00e7\u00e3o","text":"<pre><code>import pytest\nfrom globaldatafinance import FundamentalStocksDataCVM\n\n@pytest.mark.integration\n@pytest.mark.requires_network\nclass TestFundamentalStocksDataIntegration:\n    def test_get_available_docs(self):\n        \"\"\"Testa obten\u00e7\u00e3o de documentos dispon\u00edveis.\"\"\"\n        cvm = FundamentalStocksDataCVM()\n        docs = cvm.get_available_docs()\n\n        assert isinstance(docs, dict)\n        assert len(docs) &gt; 0\n        assert \"DFP\" in docs\n</code></pre>"},{"location":"dev-guide/testing/#fixtures","title":"Fixtures","text":"<pre><code>import pytest\nfrom pathlib import Path\n\n@pytest.fixture\ndef temp_dir(tmp_path):\n    \"\"\"Cria diret\u00f3rio tempor\u00e1rio para testes.\"\"\"\n    return tmp_path\n\n@pytest.fixture\ndef sample_zip_file(tmp_path):\n    \"\"\"Cria arquivo ZIP de exemplo.\"\"\"\n    zip_path = tmp_path / \"test.zip\"\n    # Criar ZIP...\n    return zip_path\n</code></pre>"},{"location":"dev-guide/testing/#cobertura","title":"Cobertura","text":"<p>Objetivo: &gt;= 80% de cobertura</p> <pre><code># Gerar relat\u00f3rio\npytest --cov=src --cov-report=term-missing\n\n# Relat\u00f3rio HTML\npytest --cov=src --cov-report=html\nopen htmlcov/index.html\n</code></pre>"},{"location":"dev-guide/testing/#cicd","title":"CI/CD","text":"<p>Testes s\u00e3o executados automaticamente em:</p> <ul> <li>Push para <code>main</code> ou <code>develop</code></li> <li>Pull Requests</li> <li>Releases</li> </ul> <p>Veja tamb\u00e9m:</p> <ul> <li>Como Contribuir</li> <li>Arquitetura</li> </ul>"},{"location":"reference/b3-api/","title":"API B3 - Refer\u00eancia T\u00e9cnica","text":"<p>Documenta\u00e7\u00e3o t\u00e9cnica detalhada da API B3.</p>"},{"location":"reference/b3-api/#historicalquotesb3","title":"HistoricalQuotesB3","text":""},{"location":"reference/b3-api/#classe-principal","title":"Classe Principal","text":"<pre><code>class HistoricalQuotesB3:\n    \"\"\"Interface de alto n\u00edvel para cota\u00e7\u00f5es B3.\"\"\"\n</code></pre>"},{"location":"reference/b3-api/#metodos","title":"M\u00e9todos","text":""},{"location":"reference/b3-api/#extract","title":"<code>extract()</code>","text":"<pre><code>def extract(\n    self,\n    path_of_docs: str,\n    assets_list: List[str],\n    initial_year: Optional[int] = None,\n    last_year: Optional[int] = None,\n    destination_path: Optional[str] = None,\n    output_filename: str = \"cotahist_extracted\",\n    processing_mode: str = \"fast\",\n) -&gt; Dict[str, Any]\n</code></pre> <p>Descri\u00e7\u00e3o: Extrai cota\u00e7\u00f5es hist\u00f3ricas de arquivos COTAHIST.</p> <p>Par\u00e2metros:</p> Nome Tipo Obrigat\u00f3rio Padr\u00e3o Descri\u00e7\u00e3o <code>path_of_docs</code> <code>str</code> Sim - Diret\u00f3rio com ZIPs COTAHIST <code>assets_list</code> <code>List[str]</code> Sim - Classes de ativos <code>initial_year</code> <code>Optional[int]</code> N\u00e3o <code>1986</code> Ano inicial <code>last_year</code> <code>Optional[int]</code> N\u00e3o Ano atual Ano final <code>destination_path</code> <code>Optional[str]</code> N\u00e3o <code>path_of_docs</code> Diret\u00f3rio de sa\u00edda <code>output_filename</code> <code>str</code> N\u00e3o <code>\"cotahist_extracted\"</code> Nome do arquivo <code>processing_mode</code> <code>str</code> N\u00e3o <code>\"fast\"</code> Modo: \u201cfast\u201d ou \u201cslow\u201d <p>Retorno: Dicion\u00e1rio com chaves:</p> <ul> <li><code>success</code> (bool): Sucesso da opera\u00e7\u00e3o</li> <li><code>message</code> (str): Mensagem resumida</li> <li><code>total_files</code> (int): Total de arquivos processados</li> <li><code>success_count</code> (int): Arquivos com sucesso</li> <li><code>error_count</code> (int): Arquivos com erro</li> <li><code>total_records</code> (int): Total de registros extra\u00eddos</li> <li><code>output_file</code> (str): Caminho do arquivo Parquet</li> <li><code>errors</code> (List[str]): Lista de erros (se houver)</li> </ul> <p>Exce\u00e7\u00f5es:</p> <ul> <li><code>EmptyAssetListError</code>: Lista de ativos vazia</li> <li><code>InvalidAssetsName</code>: Ativo inv\u00e1lido</li> <li><code>InvalidFirstYear</code>: Ano inicial inv\u00e1lido</li> <li><code>InvalidLastYear</code>: Ano final inv\u00e1lido</li> <li><code>EmptyDirectoryError</code>: Diret\u00f3rio vazio</li> <li><code>ExtractionError</code>: Erro na extra\u00e7\u00e3o</li> </ul> <p>Exemplo:</p> <pre><code>b3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n    initial_year=2022,\n    last_year=2023,\n    processing_mode=\"fast\"\n)\nprint(f\"Extra\u00eddos {result['total_records']:,} registros\")\n</code></pre>"},{"location":"reference/b3-api/#get_available_assets","title":"<code>get_available_assets()</code>","text":"<pre><code>def get_available_assets(self) -&gt; List[str]\n</code></pre> <p>Descri\u00e7\u00e3o: Retorna lista de classes de ativos dispon\u00edveis.</p> <p>Retorno: Lista de strings</p> <p>Exemplo:</p> <pre><code>assets = b3.get_available_assets()\n# ['a\u00e7\u00f5es', 'etf', 'op\u00e7\u00f5es', ...]\n</code></pre>"},{"location":"reference/b3-api/#get_available_years","title":"<code>get_available_years()</code>","text":"<pre><code>def get_available_years(self) -&gt; Dict[str, int]\n</code></pre> <p>Descri\u00e7\u00e3o: Retorna intervalo de anos dispon\u00edvel.</p> <p>Retorno: Dicion\u00e1rio com chaves:</p> <ul> <li><code>\"minimal_year\"</code>: 1986</li> <li><code>\"current_year\"</code>: Ano atual</li> </ul> <p>Exemplo:</p> <pre><code>years = b3.get_available_years()\n# {'minimal_year': 1986, 'current_year': ano atual}\n</code></pre>"},{"location":"reference/b3-api/#classes-de-ativos","title":"Classes de Ativos","text":"C\u00f3digo Descri\u00e7\u00e3o Mercados a\u00e7\u00f5es A\u00e7\u00f5es 010 (\u00e0 vista), 012 (fracion\u00e1rio) etf ETFs Exchange Traded Funds op\u00e7\u00f5es Op\u00e7\u00f5es 070 (call), 080 (put) termo Mercado a Termo Contratos a termo exercicio_opcoes Exerc\u00edcio de Op\u00e7\u00f5es Exerc\u00edcio de op\u00e7\u00f5es forward Mercado Forward Contratos forward leilao Leil\u00e3o Mercado de leil\u00e3o"},{"location":"reference/b3-api/#modos-de-processamento","title":"Modos de Processamento","text":"Modo Performance CPU RAM Uso fast Alta Alto ~2GB Padr\u00e3o, m\u00e1quinas com bons recursos slow Moderada Baixo ~500MB Recursos limitados <p>Veja tamb\u00e9m:</p> <ul> <li>Guia de Uso B3</li> <li>Exce\u00e7\u00f5es</li> </ul>"},{"location":"reference/cvm-api/","title":"API CVM - Refer\u00eancia T\u00e9cnica","text":"<p>Documenta\u00e7\u00e3o t\u00e9cnica detalhada da API CVM.</p>"},{"location":"reference/cvm-api/#fundamentalstocksdatacvm","title":"FundamentalStocksDataCVM","text":""},{"location":"reference/cvm-api/#classe-principal","title":"Classe Principal","text":"<pre><code>class FundamentalStocksDataCVM:\n    \"\"\"Interface de alto n\u00edvel para documentos CVM.\"\"\"\n</code></pre>"},{"location":"reference/cvm-api/#metodos","title":"M\u00e9todos","text":""},{"location":"reference/cvm-api/#download","title":"<code>download()</code>","text":"<pre><code>def download(\n    self,\n    destination_path: str,\n    list_docs: Optional[List[str]] = None,\n    initial_year: Optional[int] = None,\n    last_year: Optional[int] = None,\n    automatic_extractor: bool = False,\n) -&gt; None\n</code></pre> <p>Descri\u00e7\u00e3o: Baixa documentos CVM para diret\u00f3rio especificado.</p> <p>Par\u00e2metros:</p> Nome Tipo Obrigat\u00f3rio Padr\u00e3o Descri\u00e7\u00e3o <code>destination_path</code> <code>str</code> Sim - Diret\u00f3rio de destino <code>list_docs</code> <code>Optional[List[str]]</code> N\u00e3o <code>None</code> Tipos de documentos (None = todos) <code>initial_year</code> <code>Optional[int]</code> N\u00e3o <code>None</code> Ano inicial (None = m\u00ednimo dispon\u00edvel) <code>last_year</code> <code>Optional[int]</code> N\u00e3o <code>None</code> Ano final (None = ano atual) <code>automatic_extractor</code> <code>bool</code> N\u00e3o <code>False</code> Extrair para Parquet <p>Exce\u00e7\u00f5es:</p> <ul> <li><code>InvalidDocName</code>: Tipo de documento inv\u00e1lido</li> <li><code>InvalidFirstYear</code>: Ano inicial inv\u00e1lido</li> <li><code>InvalidLastYear</code>: Ano final inv\u00e1lido</li> <li><code>NetworkError</code>: Erro de rede</li> <li><code>TimeoutError</code>: Timeout</li> <li><code>InvalidDestinationPathError</code>: Caminho inv\u00e1lido</li> </ul> <p>Exemplo:</p> <pre><code>cvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"/data/cvm\",\n    list_docs=[\"DFP\", \"ITR\"],\n    initial_year=2022,\n    last_year=2023,\n    automatic_extractor=True\n)\n</code></pre>"},{"location":"reference/cvm-api/#get_available_docs","title":"<code>get_available_docs()</code>","text":"<pre><code>def get_available_docs(self) -&gt; Dict[str, str]\n</code></pre> <p>Descri\u00e7\u00e3o: Retorna mapeamento de c\u00f3digos para descri\u00e7\u00f5es de documentos.</p> <p>Retorno: Dicion\u00e1rio <code>{c\u00f3digo: descri\u00e7\u00e3o}</code></p> <p>Exemplo:</p> <pre><code>docs = cvm.get_available_docs()\n# {'DFP': 'Demonstra\u00e7\u00e3o Financeira Padronizada', ...}\n</code></pre>"},{"location":"reference/cvm-api/#get_available_years","title":"<code>get_available_years()</code>","text":"<pre><code>def get_available_years(self) -&gt; Dict[str, int]\n</code></pre> <p>Descri\u00e7\u00e3o: Retorna informa\u00e7\u00f5es sobre anos dispon\u00edveis.</p> <p>Retorno: Dicion\u00e1rio com chaves:</p> <ul> <li><code>\"General Document Years\"</code>: Ano m\u00ednimo para docs gerais (2010)</li> <li><code>\"ITR Document Years\"</code>: Ano m\u00ednimo para ITR (2011)</li> <li><code>\"CGVN and VMLO Document Years\"</code>: Ano m\u00ednimo para CGVN/VLMO (2018)</li> <li><code>\"Current Year\"</code>: Ano atual</li> </ul> <p>Exemplo:</p> <pre><code>years = cvm.get_available_years()\n# {'General Document Years': 2010, 'ITR Document Years': 2011, ...}\n</code></pre>"},{"location":"reference/cvm-api/#tipos-de-documentos","title":"Tipos de Documentos","text":"C\u00f3digo Nome Completo Desde DFP Demonstra\u00e7\u00e3o Financeira Padronizada 2010 ITR Informa\u00e7\u00e3o Trimestral 2011 FRE Formul\u00e1rio de Refer\u00eancia 2010 FCA Formul\u00e1rio Cadastral 2010 CGVN C\u00f3digo de Governan\u00e7a 2018 VLMO Valores Mobili\u00e1rios 2018 IPE Informa\u00e7\u00f5es Peri\u00f3dicas e Eventuais 2010 <p>Veja tamb\u00e9m:</p> <ul> <li>Guia de Uso CVM</li> <li>Exce\u00e7\u00f5es</li> </ul>"},{"location":"reference/exceptions/","title":"Exce\u00e7\u00f5es","text":"<p>Cat\u00e1logo completo de exce\u00e7\u00f5es do Global-Data-Finance.</p>"},{"location":"reference/exceptions/#excecoes-globais-macro_exceptions","title":"Exce\u00e7\u00f5es Globais (<code>macro_exceptions</code>)","text":""},{"location":"reference/exceptions/#networkerror","title":"<code>NetworkError</code>","text":"<pre><code>class NetworkError(Exception):\n    \"\"\"Erro de rede durante download.\"\"\"\n</code></pre> <p>Quando ocorre: Problemas de conex\u00e3o HTTP</p> <p>Como tratar:</p> <pre><code>try:\n    cvm.download(...)\nexcept NetworkError as e:\n    print(f\"Erro de rede: {e}\")\n    # Verificar conex\u00e3o e tentar novamente\n</code></pre>"},{"location":"reference/exceptions/#timeouterror","title":"<code>TimeoutError</code>","text":"<pre><code>class TimeoutError(Exception):\n    \"\"\"Timeout em requisi\u00e7\u00e3o.\"\"\"\n</code></pre> <p>Quando ocorre: Requisi\u00e7\u00e3o excede tempo limite</p>"},{"location":"reference/exceptions/#extractionerror","title":"<code>ExtractionError</code>","text":"<pre><code>class ExtractionError(Exception):\n    \"\"\"Erro ao extrair arquivo.\"\"\"\n</code></pre> <p>Quando ocorre: Falha ao extrair ZIP ou processar dados</p>"},{"location":"reference/exceptions/#emptydirectoryerror","title":"<code>EmptyDirectoryError</code>","text":"<pre><code>class EmptyDirectoryError(Exception):\n    \"\"\"Diret\u00f3rio vazio ou sem arquivos esperados.\"\"\"\n</code></pre> <p>Quando ocorre: Diret\u00f3rio n\u00e3o cont\u00e9m arquivos necess\u00e1rios</p>"},{"location":"reference/exceptions/#invaliddestinationpatherror","title":"<code>InvalidDestinationPathError</code>","text":"<pre><code>class InvalidDestinationPathError(ValueError):\n    \"\"\"Caminho de destino inv\u00e1lido.\"\"\"\n</code></pre> <p>Quando ocorre: Caminho n\u00e3o existe ou sem permiss\u00f5es</p>"},{"location":"reference/exceptions/#diskfullerror","title":"<code>DiskFullError</code>","text":"<pre><code>class DiskFullError(OSError):\n    \"\"\"Disco cheio.\"\"\"\n</code></pre> <p>Quando ocorre: Espa\u00e7o insuficiente em disco</p>"},{"location":"reference/exceptions/#securityerror","title":"<code>SecurityError</code>","text":"<pre><code>class SecurityError(Exception):\n    \"\"\"Viola\u00e7\u00e3o de seguran\u00e7a.\"\"\"\n</code></pre> <p>Quando ocorre: Tentativa de acesso n\u00e3o autorizado</p>"},{"location":"reference/exceptions/#excecoes-cvm","title":"Exce\u00e7\u00f5es CVM","text":""},{"location":"reference/exceptions/#invaliddocname","title":"<code>InvalidDocName</code>","text":"<pre><code>class InvalidDocName(Exception):\n    \"\"\"Tipo de documento inv\u00e1lido.\"\"\"\n</code></pre> <p>Quando ocorre: Documento n\u00e3o est\u00e1 na lista de dispon\u00edveis</p> <p>Como tratar:</p> <pre><code>try:\n    cvm.download(list_docs=[\"INVALID\"])\nexcept InvalidDocName:\n    docs = cvm.get_available_docs()\n    print(f\"Documentos v\u00e1lidos: {list(docs.keys())}\")\n</code></pre>"},{"location":"reference/exceptions/#invalidfirstyear","title":"<code>InvalidFirstYear</code>","text":"<pre><code>class InvalidFirstYear(Exception):\n    \"\"\"Ano inicial inv\u00e1lido.\"\"\"\n</code></pre> <p>Quando ocorre: Ano &lt; m\u00ednimo ou &gt; atual</p>"},{"location":"reference/exceptions/#invalidlastyear","title":"<code>InvalidLastYear</code>","text":"<pre><code>class InvalidLastYear(Exception):\n    \"\"\"Ano final inv\u00e1lido.\"\"\"\n</code></pre> <p>Quando ocorre: Ano &lt; initial_year ou &gt; atual</p>"},{"location":"reference/exceptions/#emptydocumentlisterror","title":"<code>EmptyDocumentListError</code>","text":"<pre><code>class EmptyDocumentListError(Exception):\n    \"\"\"Lista de documentos vazia.\"\"\"\n</code></pre> <p>Quando ocorre: <code>list_docs</code> \u00e9 lista vazia</p>"},{"location":"reference/exceptions/#excecoes-b3","title":"Exce\u00e7\u00f5es B3","text":""},{"location":"reference/exceptions/#invalidassetsname","title":"<code>InvalidAssetsName</code>","text":"<pre><code>class InvalidAssetsName(Exception):\n    \"\"\"Classe de ativo inv\u00e1lida.\"\"\"\n</code></pre> <p>Quando ocorre: Ativo n\u00e3o est\u00e1 na lista de dispon\u00edveis</p> <p>Como tratar:</p> <pre><code>try:\n    b3.extract(assets_list=[\"invalid\"])\nexcept InvalidAssetsName:\n    assets = b3.get_available_assets()\n    print(f\"Ativos v\u00e1lidos: {assets}\")\n</code></pre>"},{"location":"reference/exceptions/#emptyassetlisterror","title":"<code>EmptyAssetListError</code>","text":"<pre><code>class EmptyAssetListError(Exception):\n    \"\"\"Lista de ativos vazia.\"\"\"\n</code></pre> <p>Quando ocorre: <code>assets_list</code> \u00e9 lista vazia</p>"},{"location":"reference/exceptions/#hierarquia-de-excecoes","title":"Hierarquia de Exce\u00e7\u00f5es","text":"<pre><code>Exception\n\u251c\u2500\u2500 NetworkError\n\u251c\u2500\u2500 TimeoutError\n\u251c\u2500\u2500 ExtractionError\n\u2502   \u2514\u2500\u2500 CorruptedZipError\n\u251c\u2500\u2500 SecurityError\n\u251c\u2500\u2500 InvalidDocName\n\u251c\u2500\u2500 InvalidFirstYear\n\u251c\u2500\u2500 InvalidLastYear\n\u251c\u2500\u2500 InvalidAssetsName\n\u251c\u2500\u2500 EmptyAssetListError\n\u251c\u2500\u2500 EmptyDocumentListError\n\u2514\u2500\u2500 EmptyDirectoryError\n\nValueError\n\u2514\u2500\u2500 InvalidDestinationPathError\n\nOSError\n\u2514\u2500\u2500 DiskFullError\n</code></pre>"},{"location":"reference/exceptions/#exemplo-de-tratamento-completo","title":"Exemplo de Tratamento Completo","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\nfrom globaldatafinance.brazil.cvm.fundamental_stocks_data.exceptions import *\nfrom globaldatafinance.macro_exceptions import *\n\ncvm = FundamentalStocksDataCVM()\n\ntry:\n    cvm.download(\n        destination_path=\"/data/cvm\",\n        list_docs=[\"DFP\"],\n        initial_year=2022\n    )\nexcept InvalidDocName as e:\n    print(f\"Documento inv\u00e1lido: {e}\")\nexcept InvalidFirstYear as e:\n    print(f\"Ano inv\u00e1lido: {e}\")\nexcept NetworkError as e:\n    print(f\"Erro de rede: {e}\")\nexcept TimeoutError as e:\n    print(f\"Timeout: {e}\")\nexcept DiskFullError as e:\n    print(f\"Disco cheio: {e}\")\nexcept Exception as e:\n    print(f\"Erro inesperado: {e}\")\n</code></pre> <p>Veja tamb\u00e9m:</p> <ul> <li>API CVM</li> <li>API B3</li> <li>FAQ</li> </ul>"},{"location":"user-guide/b3-docs/","title":"Cota\u00e7\u00f5es Hist\u00f3ricas B3","text":"<p>Guia completo para usar a API <code>HistoricalQuotesB3</code> e extrair cota\u00e7\u00f5es hist\u00f3ricas da B3 (Brasil, Bolsa, Balc\u00e3o) a partir de arquivos COTAHIST.</p>"},{"location":"user-guide/b3-docs/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A classe <code>HistoricalQuotesB3</code> fornece uma interface poderosa para processar arquivos COTAHIST da B3, extraindo cota\u00e7\u00f5es hist\u00f3ricas de diferentes classes de ativos e convertendo-as para o formato Parquet otimizado para an\u00e1lise.</p>"},{"location":"user-guide/b3-docs/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>\u2705 Extra\u00e7\u00e3o de m\u00faltiplas classes de ativos</li> <li>\u2705 Processamento de alto desempenho (modo fast/slow)</li> <li>\u2705 Convers\u00e3o autom\u00e1tica para formato Parquet</li> <li>\u2705 Suporte a dados desde 1986</li> <li>\u2705 Filtragem inteligente por tipo de ativo</li> <li>\u2705 Progress tracking detalhado</li> </ul>"},{"location":"user-guide/b3-docs/#classes-de-ativos-disponiveis","title":"Classes de Ativos Dispon\u00edveis","text":"<p>A B3 disponibiliza cota\u00e7\u00f5es hist\u00f3ricas para as seguintes classes de ativos:</p> C\u00f3digo Descri\u00e7\u00e3o Mercados Inclu\u00eddos a\u00e7\u00f5es A\u00e7\u00f5es Mercado \u00e0 vista (010) e fracion\u00e1rio (012) etf ETFs Exchange Traded Funds op\u00e7\u00f5es Op\u00e7\u00f5es Calls (070) e Puts (080) termo Mercado a Termo Contratos a termo exercicio_opcoes Exerc\u00edcio de Op\u00e7\u00f5es Exerc\u00edcio de op\u00e7\u00f5es forward Mercado Forward Contratos forward leilao Leil\u00e3o Mercado de leil\u00e3o <p>Dados Hist\u00f3ricos</p> <p>Cota\u00e7\u00f5es hist\u00f3ricas da B3 est\u00e3o dispon\u00edveis desde 1986 at\u00e9 o ano atual.</p>"},{"location":"user-guide/b3-docs/#uso-basico","title":"Uso B\u00e1sico","text":""},{"location":"user-guide/b3-docs/#importacao","title":"Importa\u00e7\u00e3o","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\n</code></pre>"},{"location":"user-guide/b3-docs/#criar-instancia","title":"Criar Inst\u00e2ncia","text":"<pre><code>b3 = HistoricalQuotesB3()\n</code></pre>"},{"location":"user-guide/b3-docs/#extracao-simples","title":"Extra\u00e7\u00e3o Simples","text":"<pre><code># Extrair cota\u00e7\u00f5es de a\u00e7\u00f5es do ano atual\nresult = b3.extract(\n    path_of_docs=\"/home/usuario/cotahist_zips\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2023\n)\n\nprint(f\"\u2713 Extra\u00eddos {result['total_records']:,} registros\")\n</code></pre>"},{"location":"user-guide/b3-docs/#metodos-principais","title":"M\u00e9todos Principais","text":""},{"location":"user-guide/b3-docs/#extract","title":"<code>extract()</code>","text":"<p>Extrai cota\u00e7\u00f5es hist\u00f3ricas de arquivos COTAHIST ZIP para formato Parquet.</p>"},{"location":"user-guide/b3-docs/#assinatura","title":"Assinatura","text":"<pre><code>def extract(\n    self,\n    path_of_docs: str,\n    assets_list: List[str],\n    initial_year: Optional[int] = None,\n    last_year: Optional[int] = None,\n    destination_path: Optional[str] = None,\n    output_filename: str = \"cotahist_extracted\",\n    processing_mode: str = \"fast\",\n) -&gt; Dict[str, Any]\n</code></pre>"},{"location":"user-guide/b3-docs/#parametros","title":"Par\u00e2metros","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o <code>path_of_docs</code> <code>str</code> \u2705 Sim Diret\u00f3rio contendo arquivos COTAHIST ZIP <code>assets_list</code> <code>List[str]</code> \u2705 Sim Lista de classes de ativos a extrair <code>initial_year</code> <code>int</code> \u274c N\u00e3o Ano inicial (padr\u00e3o: 1986) <code>last_year</code> <code>int</code> \u274c N\u00e3o Ano final (padr\u00e3o: ano atual) <code>destination_path</code> <code>str</code> \u274c N\u00e3o Diret\u00f3rio de sa\u00edda (padr\u00e3o: mesmo que <code>path_of_docs</code>) <code>output_filename</code> <code>str</code> \u274c N\u00e3o Nome do arquivo de sa\u00edda sem extens\u00e3o <code>processing_mode</code> <code>str</code> \u274c N\u00e3o Modo de processamento: <code>\"fast\"</code> ou <code>\"slow\"</code>"},{"location":"user-guide/b3-docs/#retorno","title":"Retorno","text":"<p>Dicion\u00e1rio com as seguintes chaves:</p> Chave Tipo Descri\u00e7\u00e3o <code>success</code> <code>bool</code> <code>True</code> se extra\u00e7\u00e3o foi bem-sucedida <code>message</code> <code>str</code> Mensagem resumida do resultado <code>total_files</code> <code>int</code> Total de arquivos ZIP processados <code>success_count</code> <code>int</code> Arquivos processados com sucesso <code>error_count</code> <code>int</code> Arquivos com erro <code>total_records</code> <code>int</code> Total de registros extra\u00eddos <code>output_file</code> <code>str</code> Caminho completo do arquivo Parquet gerado <code>errors</code> <code>List[str]</code> Lista de erros (se houver)"},{"location":"user-guide/b3-docs/#exemplos","title":"Exemplos","text":"<p>Exemplo 1: Extra\u00e7\u00e3o b\u00e1sica de a\u00e7\u00f5es</p> <pre><code>b3 = HistoricalQuotesB3()\n\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2022,\n    last_year=2023\n)\n\nif result['success']:\n    print(f\"\u2713 Arquivo gerado: {result['output_file']}\")\n    print(f\"\u2713 Total de registros: {result['total_records']:,}\")\n</code></pre> <p>Exemplo 2: M\u00faltiplas classes de ativos</p> <pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\", \"op\u00e7\u00f5es\"],\n    initial_year=2020,\n    last_year=2023,\n    output_filename=\"multi_ativos_2020_2023\"\n)\n</code></pre> <p>Exemplo 3: Modo de baixa performance (economia de recursos)</p> <pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2023,\n    processing_mode=\"slow\"  # Usa menos CPU/RAM\n)\n</code></pre> <p>Exemplo 4: Destino personalizado</p> <pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist_zips\",\n    destination_path=\"/data/cotacoes_extraidas\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n    initial_year=2023,\n    output_filename=\"acoes_etf_2023\"\n)\n# Arquivo salvo em: /data/cotacoes_extraidas/acoes_etf_2023.parquet\n</code></pre>"},{"location":"user-guide/b3-docs/#get_available_assets","title":"<code>get_available_assets()</code>","text":"<p>Retorna lista de todas as classes de ativos dispon\u00edveis.</p>"},{"location":"user-guide/b3-docs/#assinatura_1","title":"Assinatura","text":"<pre><code>def get_available_assets(self) -&gt; List[str]\n</code></pre>"},{"location":"user-guide/b3-docs/#retorno_1","title":"Retorno","text":"<p>Lista de strings com c\u00f3digos das classes de ativos.</p>"},{"location":"user-guide/b3-docs/#exemplo","title":"Exemplo","text":"<pre><code>b3 = HistoricalQuotesB3()\nassets = b3.get_available_assets()\n\nprint(\"Classes de ativos dispon\u00edveis:\")\nfor asset in assets:\n    print(f\"  \u2022 {asset}\")\n</code></pre> <p>Sa\u00edda:</p> <pre><code>Classes de ativos dispon\u00edveis:\n  \u2022 a\u00e7\u00f5es\n  \u2022 etf\n  \u2022 op\u00e7\u00f5es\n  \u2022 termo\n  \u2022 exercicio_opcoes\n  \u2022 forward\n  \u2022 leilao\n</code></pre>"},{"location":"user-guide/b3-docs/#get_available_years","title":"<code>get_available_years()</code>","text":"<p>Retorna informa\u00e7\u00f5es sobre o intervalo de anos dispon\u00edvel.</p>"},{"location":"user-guide/b3-docs/#assinatura_2","title":"Assinatura","text":"<pre><code>def get_available_years(self) -&gt; Dict[str, int]\n</code></pre>"},{"location":"user-guide/b3-docs/#retorno_2","title":"Retorno","text":"<p>Dicion\u00e1rio com:</p> Chave Descri\u00e7\u00e3o <code>\"minimal_year\"</code> Ano m\u00ednimo dispon\u00edvel (1986) <code>\"current_year\"</code> Ano atual"},{"location":"user-guide/b3-docs/#exemplo_1","title":"Exemplo","text":"<pre><code>b3 = HistoricalQuotesB3()\nyears = b3.get_available_years()\n\nprint(f\"Dados dispon\u00edveis de {years['minimal_year']} at\u00e9 {years['current_year']}\")\n</code></pre> <p>Sa\u00edda:</p> <pre><code>Dados dispon\u00edveis de 1986 at\u00e9 ano atual\n</code></pre>"},{"location":"user-guide/b3-docs/#modos-de-processamento","title":"Modos de Processamento","text":"<p>A extra\u00e7\u00e3o suporta dois modos de processamento:</p>"},{"location":"user-guide/b3-docs/#modo-fast-padrao","title":"Modo Fast (Padr\u00e3o) \u26a1","text":"<ul> <li>Performance: Alto desempenho</li> <li>CPU: Uso intensivo (multi-core)</li> <li>RAM: Maior consumo de mem\u00f3ria</li> <li>Recomendado para: M\u00e1quinas com bons recursos, processamento de grandes volumes</li> </ul> <pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    processing_mode=\"fast\"  # Padr\u00e3o\n)\n</code></pre>"},{"location":"user-guide/b3-docs/#modo-slow","title":"Modo Slow \ud83d\udc22","text":"<ul> <li>Performance: Moderada</li> <li>CPU: Uso reduzido (single-core ou poucos cores)</li> <li>RAM: Menor consumo de mem\u00f3ria</li> <li>Recomendado para: M\u00e1quinas com recursos limitados, processamento em background</li> </ul> <pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    processing_mode=\"slow\"\n)\n</code></pre>"},{"location":"user-guide/b3-docs/#comparacao-de-performance","title":"Compara\u00e7\u00e3o de Performance","text":"Modo Tempo (100k registros) CPU RAM Recomendado fast ~5s Alto ~2GB \u2705 Sim (padr\u00e3o) slow ~15s Baixo ~500MB Recursos limitados"},{"location":"user-guide/b3-docs/#exemplos-avancados","title":"Exemplos Avan\u00e7ados","text":""},{"location":"user-guide/b3-docs/#extracao-de-todos-os-ativos","title":"Extra\u00e7\u00e3o de Todos os Ativos","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\n\nb3 = HistoricalQuotesB3()\n\n# Obter todas as classes de ativos\nall_assets = b3.get_available_assets()\n\n# Extrair tudo\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=all_assets,  # Todas as classes\n    initial_year=2023,\n    output_filename=\"todos_ativos_2023\"\n)\n\nprint(f\"\u2713 Extra\u00eddos {result['total_records']:,} registros de {len(all_assets)} classes\")\n</code></pre>"},{"location":"user-guide/b3-docs/#extracao-incremental-por-ano","title":"Extra\u00e7\u00e3o Incremental por Ano","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\nimport os\n\nb3 = HistoricalQuotesB3()\nbase_path = \"/data/cotahist\"\noutput_path = \"/data/cotacoes_extraidas\"\n\n# Extrair cada ano separadamente\nfor year in range(2020, 2024):\n    output_file = f\"acoes_{year}\"\n\n    result = b3.extract(\n        path_of_docs=base_path,\n        destination_path=output_path,\n        assets_list=[\"a\u00e7\u00f5es\"],\n        initial_year=year,\n        last_year=year,\n        output_filename=output_file\n    )\n\n    if result['success']:\n        print(f\"\u2713 {year}: {result['total_records']:,} registros\")\n    else:\n        print(f\"\u2717 {year}: Erro na extra\u00e7\u00e3o\")\n</code></pre>"},{"location":"user-guide/b3-docs/#validacao-antes-da-extracao","title":"Valida\u00e7\u00e3o Antes da Extra\u00e7\u00e3o","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\nimport os\n\nb3 = HistoricalQuotesB3()\npath_docs = \"/data/cotahist\"\n\n# 1. Verificar se diret\u00f3rio existe\nif not os.path.exists(path_docs):\n    print(f\"\u2717 Diret\u00f3rio n\u00e3o encontrado: {path_docs}\")\n    exit(1)\n\n# 2. Verificar se h\u00e1 arquivos COTAHIST\nzip_files = [f for f in os.listdir(path_docs) if f.startswith(\"COTAHIST\") and f.endswith(\".ZIP\")]\n\nif not zip_files:\n    print(f\"\u2717 Nenhum arquivo COTAHIST encontrado em {path_docs}\")\n    exit(1)\n\nprint(f\"\u2713 Encontrados {len(zip_files)} arquivos COTAHIST\")\n\n# 3. Validar classes de ativos\nrequested_assets = [\"a\u00e7\u00f5es\", \"etf\"]\navailable_assets = b3.get_available_assets()\n\ninvalid_assets = [a for a in requested_assets if a not in available_assets]\nif invalid_assets:\n    print(f\"\u2717 Ativos inv\u00e1lidos: {invalid_assets}\")\n    print(f\"Ativos dispon\u00edveis: {available_assets}\")\n    exit(1)\n\n# 4. Prosseguir com extra\u00e7\u00e3o\nresult = b3.extract(\n    path_of_docs=path_docs,\n    assets_list=requested_assets,\n    initial_year=2023\n)\n</code></pre>"},{"location":"user-guide/b3-docs/#tratamento-de-erros","title":"Tratamento de Erros","text":""},{"location":"user-guide/b3-docs/#excecoes-comuns","title":"Exce\u00e7\u00f5es Comuns","text":"Exce\u00e7\u00e3o Quando ocorre Como tratar <code>EmptyAssetListError</code> <code>assets_list</code> est\u00e1 vazio Fornecer pelo menos um ativo <code>InvalidAssetsName</code> Ativo inv\u00e1lido em <code>assets_list</code> Verificar com <code>get_available_assets()</code> <code>InvalidFirstYear</code> <code>initial_year</code> fora do intervalo Usar 1986 \u2264 ano \u2264 ano atual <code>InvalidLastYear</code> <code>last_year</code> inv\u00e1lido Usar <code>initial_year</code> \u2264 ano \u2264 ano atual <code>EmptyDirectoryError</code> Diret\u00f3rio sem arquivos COTAHIST Verificar caminho e arquivos <code>ExtractionError</code> Erro ao processar ZIP Verificar integridade dos arquivos"},{"location":"user-guide/b3-docs/#formato-dos-arquivos-cotahist","title":"Formato dos Arquivos COTAHIST","text":""},{"location":"user-guide/b3-docs/#nomenclatura","title":"Nomenclatura","text":"<p>Os arquivos COTAHIST seguem o padr\u00e3o:</p> <pre><code>COTAHIST_AXXXX.ZIP\n</code></pre> <p>Onde <code>XXXX</code> \u00e9 o ano (ex: <code>COTAHIST_A2023.ZIP</code>).</p>"},{"location":"user-guide/b3-docs/#onde-obter","title":"Onde Obter","text":"<p>Os arquivos COTAHIST podem ser baixados do site oficial da B3:</p> <p>\ud83d\udd17 https://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/historico/mercado-a-vista/cotacoes-historicas/</p>"},{"location":"user-guide/b3-docs/#estrutura-interna","title":"Estrutura Interna","text":"<p>Cada arquivo ZIP cont\u00e9m um arquivo TXT com layout de largura fixa:</p> <pre><code>COTAHIST_A2023.ZIP\n\u2514\u2500\u2500 COTAHIST_A2023.TXT  (arquivo de texto com largura fixa)\n</code></pre> <p>O Global-Data-Finance processa automaticamente este formato e converte para Parquet.</p>"},{"location":"user-guide/b3-docs/#estrutura-do-arquivo-parquet-gerado","title":"Estrutura do Arquivo Parquet Gerado","text":""},{"location":"user-guide/b3-docs/#colunas","title":"Colunas","text":"<p>O arquivo Parquet gerado cont\u00e9m as seguintes colunas:</p> Coluna Tipo Descri\u00e7\u00e3o <code>data_pregao</code> <code>date</code> Data do preg\u00e3o <code>codigo_bdi</code> <code>string</code> C\u00f3digo BDI <code>ticker</code> <code>string</code> C\u00f3digo de negocia\u00e7\u00e3o (ex: PETR4) <code>tipo_mercado</code> <code>string</code> Tipo de mercado <code>nome_resumido</code> <code>string</code> Nome resumido da empresa <code>especificacao_papel</code> <code>string</code> Especifica\u00e7\u00e3o do papel (ex: ON, PN) <code>preco_abertura</code> <code>decimal</code> Pre\u00e7o de abertura <code>preco_maximo</code> <code>decimal</code> Pre\u00e7o m\u00e1ximo do dia <code>preco_minimo</code> <code>decimal</code> Pre\u00e7o m\u00ednimo do dia <code>preco_medio</code> <code>decimal</code> Pre\u00e7o m\u00e9dio do dia <code>preco_fechamento</code> <code>decimal</code> Pre\u00e7o de fechamento <code>melhor_oferta_compra</code> <code>decimal</code> Melhor oferta de compra <code>melhor_oferta_venda</code> <code>decimal</code> Melhor oferta de venda <code>numero_negocios</code> <code>int</code> N\u00famero de neg\u00f3cios efetuados <code>quantidade_total</code> <code>int</code> Quantidade total de t\u00edtulos negociados <code>volume_total</code> <code>decimal</code> Volume total financeiro <code>data_vencimento</code> <code>date</code> Data de vencimento (op\u00e7\u00f5es/termo) <code>fator_cotacao</code> <code>int</code> Fator de cota\u00e7\u00e3o <code>codigo_isin</code> <code>string</code> C\u00f3digo ISIN <code>numero_distribuicao</code> <code>int</code> N\u00famero de distribui\u00e7\u00e3o"},{"location":"user-guide/b3-docs/#leitura-com-pandas","title":"Leitura com Pandas","text":"<pre><code>import pandas as pd\n\ndf = pd.read_parquet(\"/data/cotacoes_extraidas/cotahist_extracted.parquet\")\n\nprint(df.head())\nprint(f\"\\nShape: {df.shape}\")\nprint(f\"Per\u00edodo: {df['data_pregao'].min()} a {df['data_pregao'].max()}\")\n</code></pre>"},{"location":"user-guide/b3-docs/#leitura-com-polars-mais-rapido","title":"Leitura com Polars (Mais R\u00e1pido)","text":"<pre><code>import polars as pl\n\ndf = pl.read_parquet(\"/data/cotacoes_extraidas/cotahist_extracted.parquet\")\n\nprint(df.head())\nprint(f\"\\nShape: {df.shape}\")\nprint(f\"Mem\u00f3ria: {df.estimated_size('mb'):.2f} MB\")\n</code></pre>"},{"location":"user-guide/b3-docs/#boas-praticas","title":"Boas Pr\u00e1ticas","text":""},{"location":"user-guide/b3-docs/#1-use-modo-fast-para-grandes-volumes","title":"1. Use Modo Fast para Grandes Volumes","text":"<pre><code># \u2705 Recomendado para grandes volumes\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=1986,  # 23+ anos\n    processing_mode=\"fast\"\n)\n</code></pre>"},{"location":"user-guide/b3-docs/#2-separe-extracoes-por-classe-de-ativo","title":"2. Separe Extra\u00e7\u00f5es por Classe de Ativo","text":"<pre><code># \u2705 Melhor: arquivos separados por classe\nfor asset in [\"a\u00e7\u00f5es\", \"etf\", \"op\u00e7\u00f5es\"]:\n    result = b3.extract(\n        path_of_docs=\"/data/cotahist\",\n        assets_list=[asset],\n        initial_year=2023,\n        output_filename=f\"{asset}_2023\"\n    )\n\n# \u274c Evite: tudo em um arquivo (pode ficar muito grande)\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\", \"op\u00e7\u00f5es\", \"termo\", \"forward\"],\n    initial_year=1986,  # 38+ anos!\n    output_filename=\"tudo\"\n)\n</code></pre>"},{"location":"user-guide/b3-docs/#3-verifique-espaco-em-disco","title":"3. Verifique Espa\u00e7o em Disco","text":"<pre><code>import shutil\n\nstats = shutil.disk_usage(\"/data\")\nfree_gb = stats.free / (1024**3)\n\nif free_gb &lt; 5:\n    print(f\"\u26a0\ufe0f  Pouco espa\u00e7o: {free_gb:.2f} GB\")\n    # Use modo slow ou processe menos anos\nelse:\n    # Prosseguir normalmente\n    pass\n</code></pre>"},{"location":"user-guide/b3-docs/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>\ud83d\udcc4 Documentos CVM - Aprenda a baixar documentos CVM</li> <li>\ud83d\udcbb Exemplos Pr\u00e1ticos - Veja casos de uso completos</li> <li>\ud83d\udd27 API Reference - Documenta\u00e7\u00e3o t\u00e9cnica detalhada</li> <li>\u2753 FAQ - Perguntas frequentes</li> </ul> <p>Dica de An\u00e1lise</p> <p>Ap\u00f3s extrair para Parquet, use Polars para an\u00e1lises de alto desempenho. \u00c9 significativamente mais r\u00e1pido que Pandas para grandes volumes de dados.</p>"},{"location":"user-guide/cvm-docs/","title":"Documentos CVM","text":"<p>Guia completo para usar a API <code>FundamentalStocksDataCVM</code> e baixar documentos fundamentalistas da Comiss\u00e3o de Valores Mobili\u00e1rios (CVM).</p>"},{"location":"user-guide/cvm-docs/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A classe <code>FundamentalStocksDataCVM</code> fornece uma interface simples e poderosa para baixar documentos oficiais da CVM, incluindo demonstra\u00e7\u00f5es financeiras, formul\u00e1rios de refer\u00eancia e outros documentos regulat\u00f3rios de empresas brasileiras de capital aberto.</p>"},{"location":"user-guide/cvm-docs/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>\u2705 Download autom\u00e1tico de m\u00faltiplos tipos de documentos</li> <li>\u2705 Suporte a intervalos de anos flex\u00edveis</li> <li>\u2705 Extra\u00e7\u00e3o autom\u00e1tica para formato Parquet (opcional)</li> <li>\u2705 Download paralelo de alto desempenho (3-5x mais r\u00e1pido)</li> <li>\u2705 Tratamento robusto de erros e retry autom\u00e1tico</li> <li>\u2705 Logging detalhado do progresso</li> </ul>"},{"location":"user-guide/cvm-docs/#tipos-de-documentos-disponiveis","title":"Tipos de Documentos Dispon\u00edveis","text":"<p>A CVM disponibiliza os seguintes tipos de documentos:</p> C\u00f3digo Nome Completo Descri\u00e7\u00e3o Dispon\u00edvel desde DFP Demonstra\u00e7\u00e3o Financeira Padronizada Balan\u00e7os anuais completos 2010 ITR Informa\u00e7\u00e3o Trimestral Demonstra\u00e7\u00f5es financeiras trimestrais 2011 FRE Formul\u00e1rio de Refer\u00eancia Informa\u00e7\u00f5es detalhadas sobre a empresa 2010 FCA Formul\u00e1rio Cadastral Dados cadastrais da empresa 2010 CGVN C\u00f3digo de Governan\u00e7a Pr\u00e1ticas de governan\u00e7a corporativa 2018 VLMO Valores Mobili\u00e1rios Informa\u00e7\u00f5es sobre valores mobili\u00e1rios 2018 IPE Informa\u00e7\u00f5es Peri\u00f3dicas e Eventuais Documentos peri\u00f3dicos e eventuais 2010 <p>Dados Hist\u00f3ricos</p> <p>A maioria dos documentos est\u00e1 dispon\u00edvel desde 2010, exceto ITR (2011) e CGVN/VLMO (2018).</p>"},{"location":"user-guide/cvm-docs/#uso-basico","title":"Uso B\u00e1sico","text":""},{"location":"user-guide/cvm-docs/#importacao","title":"Importa\u00e7\u00e3o","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\n</code></pre>"},{"location":"user-guide/cvm-docs/#criar-instancia","title":"Criar Inst\u00e2ncia","text":"<pre><code>cvm = FundamentalStocksDataCVM()\n</code></pre>"},{"location":"user-guide/cvm-docs/#download-simples","title":"Download Simples","text":"<pre><code># Baixar DFP dos \u00faltimos 3 anos\ncvm.download(\n    destination_path=\"/home/usuario/dados_cvm\",\n    list_docs=[\"DFP\"],\n    initial_year=2021,\n    last_year=2023\n)\n</code></pre>"},{"location":"user-guide/cvm-docs/#metodos-principais","title":"M\u00e9todos Principais","text":""},{"location":"user-guide/cvm-docs/#download","title":"<code>download()</code>","text":"<p>Baixa documentos CVM para um diret\u00f3rio especificado.</p>"},{"location":"user-guide/cvm-docs/#assinatura","title":"Assinatura","text":"<pre><code>def download(\n    self,\n    destination_path: str,\n    list_docs: Optional[List[str]] = None,\n    initial_year: Optional[int] = None,\n    last_year: Optional[int] = None,\n    automatic_extractor: bool = False,\n) -&gt; None\n</code></pre>"},{"location":"user-guide/cvm-docs/#parametros","title":"Par\u00e2metros","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o <code>destination_path</code> <code>str</code> \u2705 Sim Diret\u00f3rio onde os arquivos ser\u00e3o salvos <code>list_docs</code> <code>List[str]</code> \u274c N\u00e3o Lista de tipos de documentos. Se <code>None</code>, baixa todos <code>initial_year</code> <code>int</code> \u274c N\u00e3o Ano inicial (inclusive). Se <code>None</code>, usa ano m\u00ednimo dispon\u00edvel <code>last_year</code> <code>int</code> \u274c N\u00e3o Ano final (inclusive). Se <code>None</code>, usa ano atual <code>automatic_extractor</code> <code>bool</code> \u274c N\u00e3o Se <code>True</code>, extrai ZIPs para Parquet automaticamente"},{"location":"user-guide/cvm-docs/#exemplos","title":"Exemplos","text":"<p>Exemplo 1: Download b\u00e1sico de DFP</p> <pre><code>cvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"/data/cvm\",\n    list_docs=[\"DFP\"],\n    initial_year=2020,\n    last_year=2023\n)\n</code></pre> <p>Exemplo 2: Download de m\u00faltiplos documentos</p> <pre><code>cvm.download(\n    destination_path=\"/data/cvm\",\n    list_docs=[\"DFP\", \"ITR\", \"FRE\"],\n    initial_year=2022\n)\n</code></pre> <p>Exemplo 3: Download com extra\u00e7\u00e3o autom\u00e1tica</p> <pre><code>cvm.download(\n    destination_path=\"/data/cvm\",\n    list_docs=[\"DFP\"],\n    initial_year=2022,\n    automatic_extractor=True  # Extrai para Parquet\n)\n</code></pre> <p>Exemplo 4: Download de todos os documentos</p> <pre><code># list_docs=None baixa TODOS os tipos dispon\u00edveis\ncvm.download(\n    destination_path=\"/data/cvm_completo\",\n    initial_year=2023\n)\n</code></pre>"},{"location":"user-guide/cvm-docs/#get_available_docs","title":"<code>get_available_docs()</code>","text":"<p>Retorna todos os tipos de documentos dispon\u00edveis com suas descri\u00e7\u00f5es.</p>"},{"location":"user-guide/cvm-docs/#assinatura_1","title":"Assinatura","text":"<pre><code>def get_available_docs(self) -&gt; Dict[str, str]\n</code></pre>"},{"location":"user-guide/cvm-docs/#retorno","title":"Retorno","text":"<p>Dicion\u00e1rio mapeando c\u00f3digos de documentos para descri\u00e7\u00f5es completas.</p>"},{"location":"user-guide/cvm-docs/#exemplo","title":"Exemplo","text":"<pre><code>cvm = FundamentalStocksDataCVM()\ndocs = cvm.get_available_docs()\n\nfor code, description in docs.items():\n    print(f\"{code}: {description}\")\n</code></pre> <p>Sa\u00edda:</p> <pre><code>DFP: Demonstra\u00e7\u00e3o Financeira Padronizada\nITR: Informa\u00e7\u00e3o Trimestral\nFRE: Formul\u00e1rio de Refer\u00eancia\nFCA: Formul\u00e1rio Cadastral\nCGVN: C\u00f3digo de Governan\u00e7a\nVLMO: Valores Mobili\u00e1rios\nIPE: Informa\u00e7\u00f5es Peri\u00f3dicas e Eventuais\n</code></pre>"},{"location":"user-guide/cvm-docs/#get_available_years","title":"<code>get_available_years()</code>","text":"<p>Retorna informa\u00e7\u00f5es sobre os anos dispon\u00edveis para cada tipo de documento.</p>"},{"location":"user-guide/cvm-docs/#assinatura_2","title":"Assinatura","text":"<pre><code>def get_available_years(self) -&gt; Dict[str, int]\n</code></pre>"},{"location":"user-guide/cvm-docs/#retorno_1","title":"Retorno","text":"<p>Dicion\u00e1rio com informa\u00e7\u00f5es de anos dispon\u00edveis:</p> Chave Descri\u00e7\u00e3o <code>\"General Document Years\"</code> Ano m\u00ednimo para documentos gerais (2010) <code>\"ITR Document Years\"</code> Ano m\u00ednimo para ITR (2011) <code>\"CGVN and VMLO Document Years\"</code> Ano m\u00ednimo para CGVN/VLMO (2018) <code>\"Current Year\"</code> Ano atual"},{"location":"user-guide/cvm-docs/#exemplo_1","title":"Exemplo","text":"<pre><code>cvm = FundamentalStocksDataCVM()\nyears = cvm.get_available_years()\n\nprint(f\"Documentos gerais dispon\u00edveis desde: {years['General Document Years']}\")\nprint(f\"ITR dispon\u00edvel desde: {years['ITR Document Years']}\")\nprint(f\"Ano atual: {years['Current Year']}\")\n</code></pre>"},{"location":"user-guide/cvm-docs/#exemplos-avancados","title":"Exemplos Avan\u00e7ados","text":""},{"location":"user-guide/cvm-docs/#download-incremental","title":"Download Incremental","text":"<p>Baixar apenas anos que ainda n\u00e3o foram baixados:</p> <pre><code>import os\nfrom globaldatafinance import FundamentalStocksDataCVM\n\ncvm = FundamentalStocksDataCVM()\nbase_path = \"/data/cvm\"\n\n# Verificar quais anos j\u00e1 existem\nexisting_years = set()\nif os.path.exists(base_path):\n    for filename in os.listdir(base_path):\n        if \"DFP\" in filename:\n            # Extrair ano do nome do arquivo\n            year = int(filename.split(\"_\")[-1].replace(\".zip\", \"\"))\n            existing_years.add(year)\n\n# Baixar apenas anos faltantes\ncurrent_year = 2023\nall_years = set(range(2020, current_year + 1))\nmissing_years = all_years - existing_years\n\nif missing_years:\n    min_year = min(missing_years)\n    max_year = max(missing_years)\n\n    cvm.download(\n        destination_path=base_path,\n        list_docs=[\"DFP\"],\n        initial_year=min_year,\n        last_year=max_year\n    )\nelse:\n    print(\"\u2713 Todos os anos j\u00e1 foram baixados\")\n</code></pre>"},{"location":"user-guide/cvm-docs/#download-com-validacao","title":"Download com Valida\u00e7\u00e3o","text":"<p>Validar documentos antes de baixar:</p> <pre><code>from globaldatafinance import FundamentalStocksDataCVM\n\ncvm = FundamentalStocksDataCVM()\n\n# Validar tipos de documentos\nrequested_docs = [\"DFP\", \"ITR\", \"FRE\"]\navailable_docs = cvm.get_available_docs()\n\nvalid_docs = [doc for doc in requested_docs if doc in available_docs]\ninvalid_docs = [doc for doc in requested_docs if doc not in available_docs]\n\nif invalid_docs:\n    print(f\"\u26a0\ufe0f  Documentos inv\u00e1lidos: {invalid_docs}\")\n    print(f\"\u2713 Documentos v\u00e1lidos: {valid_docs}\")\n\n# Validar anos\nyears_info = cvm.get_available_years()\nrequested_year = 2015\n\nif requested_year &lt; years_info['General Document Years']:\n    print(f\"\u26a0\ufe0f  Ano {requested_year} n\u00e3o dispon\u00edvel (m\u00ednimo: {years_info['General Document Years']})\")\nelse:\n    # Prosseguir com download\n    cvm.download(\n        destination_path=\"/data/cvm\",\n        list_docs=valid_docs,\n        initial_year=requested_year\n    )\n</code></pre>"},{"location":"user-guide/cvm-docs/#tratamento-de-erros","title":"Tratamento de Erros","text":""},{"location":"user-guide/cvm-docs/#excecoes-comuns","title":"Exce\u00e7\u00f5es Comuns","text":"<p>A API pode lan\u00e7ar as seguintes exce\u00e7\u00f5es:</p> Exce\u00e7\u00e3o Quando ocorre Como tratar <code>InvalidDocName</code> Tipo de documento inv\u00e1lido Verificar lista com <code>get_available_docs()</code> <code>InvalidFirstYear</code> Ano inicial fora do intervalo Verificar anos com <code>get_available_years()</code> <code>InvalidLastYear</code> Ano final inv\u00e1lido ou menor que inicial Validar intervalo de anos <code>NetworkError</code> Erro de conex\u00e3o Verificar internet e tentar novamente <code>TimeoutError</code> Timeout na requisi\u00e7\u00e3o Aumentar timeout ou tentar mais tarde <code>InvalidDestinationPathError</code> Caminho de destino inv\u00e1lido Verificar permiss\u00f5es e caminho"},{"location":"user-guide/cvm-docs/#estrutura-dos-arquivos-baixados","title":"Estrutura dos Arquivos Baixados","text":""},{"location":"user-guide/cvm-docs/#organizacao-de-diretorios","title":"Organiza\u00e7\u00e3o de Diret\u00f3rios","text":"<p>Ap\u00f3s o download, os arquivos s\u00e3o organizados da seguinte forma:</p> <pre><code>destination_path/\n    DFP/\n        2020/\n            dfp_cia_aberta_2020.zip\n        2021/\n            dfp_cia_aberta_2021.zip\n        2022/\n            dfp_cia_aberta_2022.zip\n        2023/\n            dfp_cia_aberta_2023.zip\n    ITR/\n        2020/\n            itr_cia_aberta_2020.zip\n        2021/\n            itr_cia_aberta_2021.zip\n        2022/\n            itr_cia_aberta_2022.zip\n        2023/\n            itr_cia_aberta_2023.zip\n    FRE/\n        2020/\n            fre_cia_aberta_2020.zip\n        2021/\n            fre_cia_aberta_2021.zip\n        2022/\n            fre_cia_aberta_2022.zip\n        2023/\n            fre_cia_aberta_2023.zip\n    FCA/\n        2020/\n            fca_cia_aberta_2020.zip\n        2021/\n            fca_cia_aberta_2021.zip\n        2022/\n            fca_cia_aberta_2022.zip\n        2023/\n            fca_cia_aberta_2023.zip\n    etc...\n</code></pre>"},{"location":"user-guide/cvm-docs/#conteudo-dos-arquivos-zip","title":"Conte\u00fado dos Arquivos ZIP","text":"<p>Cada arquivo ZIP cont\u00e9m m\u00faltiplos arquivos CSV com dados estruturados:</p> <pre><code>dfp_cia_aberta_2023.zip\n\u251c\u2500\u2500 dfp_cia_aberta_2023.csv # Dados principais\n\u251c\u2500\u2500 dfp_cia_aberta_BPA_con_2023.csv # Balan\u00e7o Patrimonial Ativo Consolidado\n\u251c\u2500\u2500 dfp_cia_aberta_BPP_con_2023.csv # Balan\u00e7o Patrimonial Passivo Consolidado\n\u251c\u2500\u2500 dfp_cia_aberta_DRE_con_2023.csv # Demonstra\u00e7\u00e3o do Resultado\n\u251c\u2500\u2500 dfp_cia_aberta_DFC_MD_con_2023.csv # Fluxo de Caixa (M\u00e9todo Direto)\n\u251c\u2500\u2500 dfp_cia_aberta_DFC_MI_con_2023.csv # Fluxo de Caixa (M\u00e9todo Indireto)\n\u251c\u2500\u2500 dfp_cia_aberta_DVA_con_2023.csv # Demonstra\u00e7\u00e3o do Valor Adicionado\n\u2514\u2500\u2500 ...\n</code></pre>"},{"location":"user-guide/cvm-docs/#extracao-automatica-para-parquet","title":"Extra\u00e7\u00e3o Autom\u00e1tica para Parquet","text":"<p>Quando <code>automatic_extractor=True</code>, os arquivos s\u00e3o convertidos para Parquet:</p> <pre><code>destination_path/\n\u251c\u2500\u2500 DFP/\n    2023/\n    \u2502 \u251c\u2500\u2500 dfp_cia_aberta_2023.parquet\n    \u2502 \u251c\u2500\u2500 dfp_cia_aberta_BPA_con_2023.parquet\n    \u2502 \u251c\u2500\u2500 dfp_cia_aberta_BPP_con_2023.parquet\n    \u2502 \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 ...\n</code></pre>"},{"location":"user-guide/cvm-docs/#boas-praticas","title":"Boas Pr\u00e1ticas","text":""},{"location":"user-guide/cvm-docs/#1-use-intervalos-de-anos-razoaveis","title":"1. Use Intervalos de Anos Razo\u00e1veis","text":"<pre><code># \u274c Evite baixar muitos anos de uma vez\ncvm.download(\n    destination_path=\"/data\",\n    list_docs=[\"DFP\"],\n    initial_year=2010,  # 25+ anos!\n    last_year=2023\n)\n\n# \u2705 Prefira intervalos menores\ncvm.download(\n    destination_path=\"/data\",\n    list_docs=[\"DFP\"],\n    initial_year=2020,  # 3-4 anos\n    last_year=2023\n)\n````\n\n### 2. Verifique Espa\u00e7o em Disco\n\n```python\nimport shutil\n\n# Verificar espa\u00e7o dispon\u00edvel\nstats = shutil.disk_usage(\"/data\")\nfree_gb = stats.free / (1024**3)\n\nif free_gb &lt; 10:\n    print(f\"\u26a0\ufe0f  Pouco espa\u00e7o dispon\u00edvel: {free_gb:.2f} GB\")\nelse:\n    cvm.download(destination_path=\"/data\", ...)\n</code></pre>"},{"location":"user-guide/cvm-docs/#3-use-extracao-automatica-para-analise","title":"3. Use Extra\u00e7\u00e3o Autom\u00e1tica para An\u00e1lise","text":"<pre><code># Se voc\u00ea vai analisar os dados, use Parquet\ncvm.download(\n    destination_path=\"/data/cvm\",\n    list_docs=[\"DFP\"],\n    initial_year=2022,\n    automatic_extractor=True  # Muito mais r\u00e1pido para ler\n)\n</code></pre>"},{"location":"user-guide/cvm-docs/#performance","title":"Performance","text":""},{"location":"user-guide/cvm-docs/#modo-de-download","title":"Modo de Download","text":"<p>O <code>FundamentalStocksDataCVM</code> usa <code>AsyncDownloadAdapterCVM</code> por padr\u00e3o, que oferece:</p> <ul> <li>\u26a1 3-5x mais r\u00e1pido que download sequencial</li> <li>\ud83d\udd04 Retry autom\u00e1tico em caso de falhas</li> <li>\ud83d\udcca Progress tracking detalhado</li> <li>\ud83e\uddf5 8 workers paralelos (configur\u00e1vel)</li> </ul>"},{"location":"user-guide/cvm-docs/#benchmarks","title":"Benchmarks","text":"<p>Tempo aproximado para download de DFP (1 ano):</p> M\u00e9todo Tempo Velocidade Download sequencial ~60s 1x (baseline) AsyncDownloadAdapterCVM ~15s 4x mais r\u00e1pido"},{"location":"user-guide/cvm-docs/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>\ud83d\udcc8 Cota\u00e7\u00f5es B3 - Aprenda a extrair cota\u00e7\u00f5es hist\u00f3ricas</li> <li>\ud83d\udcbb Exemplos Pr\u00e1ticos - Veja casos de uso completos</li> <li>\ud83d\udd27 API Reference - Documenta\u00e7\u00e3o t\u00e9cnica detalhada</li> <li>\u2753 FAQ - Perguntas frequentes</li> </ul> <p>Dica de Performance</p> <p>Para an\u00e1lises de dados, sempre use <code>automatic_extractor=True</code>. O formato Parquet \u00e9 muito mais eficiente que CSV para leitura e processamento.</p>"},{"location":"user-guide/examples/","title":"Exemplos Pr\u00e1ticos","text":"<p>Esta p\u00e1gina apresenta exemplos completos e pr\u00e1ticos de uso do Global-Data-Finance em cen\u00e1rios reais.</p>"},{"location":"user-guide/examples/#exemplo-1-download-completo-de-dfp","title":"Exemplo 1: Download Completo de DFP","text":"<p>Baixar demonstra\u00e7\u00f5es financeiras padronizadas de empresas brasileiras.</p> <pre><code>from globaldatafinance import FundamentalStocksDataCVM\n\n# Criar cliente\ncvm = FundamentalStocksDataCVM()\n\n# Download de DFP com extra\u00e7\u00e3o autom\u00e1tica\ncvm.download(\n    destination_path=\"/home/usuario/dados_financeiros/dfp\",\n    list_docs=[\"DFP\"],\n    initial_year=2020,\n    last_year=2023,\n    automatic_extractor=True  # Converte para Parquet\n)\n\nprint(\"\u2713 Download e extra\u00e7\u00e3o conclu\u00eddos!\")\n</code></pre>"},{"location":"user-guide/examples/#exemplo-2-extracao-de-acoes-e-etfs","title":"Exemplo 2: Extra\u00e7\u00e3o de A\u00e7\u00f5es e ETFs","text":"<p>Extrair cota\u00e7\u00f5es hist\u00f3ricas de a\u00e7\u00f5es e ETFs com alto desempenho.</p> <pre><code>from globaldatafinance import HistoricalQuotesB3\nimport time\n\n# Criar cliente\nb3 = HistoricalQuotesB3()\n\n# Medir tempo de execu\u00e7\u00e3o\nstart_time = time.time()\n\n# Extrair dados\nresult = b3.extract(\n    path_of_docs=\"/home/usuario/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n    initial_year=2021,\n    last_year=2023,\n    destination_path=\"/home/usuario/cotacoes\",\n    output_filename=\"acoes_etf_2021_2023\",\n    processing_mode=\"fast\"\n)\n\nelapsed = time.time() - start_time\n\n# Exibir resultados\nif result['success']:\n    print(f\"\u2713 Extra\u00e7\u00e3o conclu\u00edda em {elapsed:.2f}s\")\n    print(f\"  Registros: {result['total_records']:,}\")\n    print(f\"  Throughput: {result['total_records']/elapsed:,.0f} registros/s\")\n    print(f\"  Arquivo: {result['output_file']}\")\n</code></pre>"},{"location":"user-guide/examples/#exemplo-3-pipeline-completo","title":"Exemplo 3: Pipeline Completo","text":"<p>Pipeline completo de download CVM e extra\u00e7\u00e3o B3.</p> <pre><code>from globaldatafinance import FundamentalStocksDataCVM, HistoricalQuotesB3\nimport os\n\n\n# Diret\u00f3rios\nbase_dir = \"/home/usuario/dados_financeiros\"\ncvm_dir = os.path.join(base_dir, \"cvm\")\ncotahist_dir = os.path.join(base_dir, \"cotahist\")\noutput_dir = os.path.join(base_dir, \"processado\")\n\n# === ETAPA 1: Download CVM ===\nprint(\"=\" * 60)\nprint(\"ETAPA 1: Download de Documentos CVM\")\nprint(\"=\" * 60)\n\ncvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=cvm_dir,\n    list_docs=[\"DFP\", \"ITR\"],\n    initial_year=2022,\n    last_year=2023,\n    automatic_extractor=True\n)\n\n# === ETAPA 2: Extra\u00e7\u00e3o B3 ===\nprint(\"\\n\" + \"=\" * 60)\nprint(\"ETAPA 2: Extra\u00e7\u00e3o de Cota\u00e7\u00f5es B3\")\nprint(\"=\" * 60)\n\nb3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=cotahist_dir,\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n    initial_year=2022,\n    last_year=2023,\n    destination_path=output_dir,\n    output_filename=\"cotacoes_2022_2023\"\n)\n\n# === RESUMO ===\nprint(\"\\n\" + \"=\" * 60)\nprint(\"RESUMO FINAL\")\nprint(\"=\" * 60)\nprint(f\"\u2713 Pipeline conclu\u00eddo!\")\nprint(f\"\u2713 Dados CVM salvos em: {cvm_dir}\")\nprint(f\"\u2713 Cota\u00e7\u00f5es B3 salvas em: {result['output_file']}\")\n</code></pre>"},{"location":"user-guide/examples/#exemplo-4-analise-com-pandas","title":"Exemplo 4: An\u00e1lise com Pandas","text":"<p>Analisar dados extra\u00eddos usando Pandas.</p> <pre><code>import pandas as pd\nfrom globaldatafinance import HistoricalQuotesB3\n\n# 1. Extrair dados\nb3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2023,\n    output_filename=\"acoes_2023\"\n)\n\n# 2. Carregar Parquet\ndf = pd.read_parquet(result['output_file'])\n\n# 3. An\u00e1lises b\u00e1sicas\nprint(\"=\" * 60)\nprint(\"AN\u00c1LISE DE DADOS\")\nprint(\"=\" * 60)\n\nprint(f\"\\nTotal de registros: {len(df):,}\")\nprint(f\"Per\u00edodo: {df['data'].min()} a {df['data'].max()}\")\nprint(f\"Ativos \u00fanicos: {df['codigo_negociacao'].nunique()}\")\n\n# Top 10 ativos por volume\ntop_volume = df.groupby('codigo_negociacao')['volume_negociado'].sum().nlargest(10)\nprint(\"\\nTop 10 ativos por volume:\")\nfor ticker, volume in top_volume.items():\n    print(f\"  {ticker}: R$ {volume/1e9:.2f}B\")\n\n# Estat\u00edsticas de pre\u00e7o\nprint(f\"\\nEstat\u00edsticas de pre\u00e7o de fechamento:\")\nprint(df['preco_fechamento'].describe())\n</code></pre>"},{"location":"user-guide/examples/#exemplo-5-processamento-com-polars","title":"Exemplo 5: Processamento com Polars","text":"<p>Usar Polars para processamento de alto desempenho.</p> <pre><code>import polars as pl\nfrom globaldatafinance import HistoricalQuotesB3\n\n# Extrair dados\nb3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2020,\n    last_year=2023\n)\n\n# Carregar com Polars (muito mais r\u00e1pido que Pandas)\ndf = pl.read_parquet(result['output_file'])\n\n# An\u00e1lises com Polars\nprint(f\"Shape: {df.shape}\")\nprint(f\"Mem\u00f3ria: {df.estimated_size('mb'):.2f} MB\")\n\n# Filtrar apenas PETR4\npetr4 = df.filter(pl.col('codigo_negociacao') == 'PETR4')\n\n# Calcular retornos di\u00e1rios\npetr4 = petr4.with_columns([\n    ((pl.col('preco_fechamento') / pl.col('preco_fechamento').shift(1)) - 1)\n    .alias('retorno_diario')\n])\n\n# Estat\u00edsticas\nprint(f\"\\nPETR4 - Estat\u00edsticas:\")\nprint(f\"  Retorno m\u00e9dio di\u00e1rio: {petr4['retorno_diario'].mean():.4%}\")\nprint(f\"  Volatilidade: {petr4['retorno_diario'].std():.4%}\")\nprint(f\"  Pre\u00e7o m\u00ednimo: R$ {petr4['preco_minimo'].min():.2f}\")\nprint(f\"  Pre\u00e7o m\u00e1ximo: R$ {petr4['preco_maximo'].max():.2f}\")\n</code></pre>"},{"location":"user-guide/examples/#exemplo-6-automacao-com-script","title":"Exemplo 6: Automa\u00e7\u00e3o com Script","text":"<p>Script completo para automa\u00e7\u00e3o de downloads.</p> <pre><code>#!/usr/bin/env python3\n\"\"\"\nScript de automa\u00e7\u00e3o para download e processamento de dados financeiros.\n\"\"\"\n\nimport argparse\nimport sys\nfrom pathlib import Path\nfrom globaldatafinance import FundamentalStocksDataCVM, HistoricalQuotesB3\n\ndef main():\n    parser = argparse.ArgumentParser(description=\"Download dados financeiros\")\n    parser.add_argument(\"--tipo\", choices=[\"cvm\", \"b3\", \"ambos\"], required=True)\n    parser.add_argument(\"--destino\", type=str, required=True)\n    parser.add_argument(\"--ano-inicial\", type=int, default=2022)\n    parser.add_argument(\"--ano-final\", type=int, default=2023)\n    parser.add_argument(\"--verbose\", action=\"store_true\")\n\n    args = parser.parse_args()\n\n    # Criar diret\u00f3rio de destino\n    dest_path = Path(args.destino)\n    dest_path.mkdir(parents=True, exist_ok=True)\n\n    try:\n        if args.tipo in [\"cvm\", \"ambos\"]:\n            print(\"Baixando documentos CVM...\")\n            cvm = FundamentalStocksDataCVM()\n            cvm.download(\n                destination_path=str(dest_path / \"cvm\"),\n                list_docs=[\"DFP\", \"ITR\"],\n                initial_year=args.ano_inicial,\n                last_year=args.ano_final,\n                automatic_extractor=True\n            )\n\n        if args.tipo in [\"b3\", \"ambos\"]:\n            print(\"Extraindo cota\u00e7\u00f5es B3...\")\n            b3 = HistoricalQuotesB3()\n            result = b3.extract(\n                path_of_docs=str(dest_path / \"cotahist\"),\n                assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n                initial_year=args.ano_inicial,\n                last_year=args.ano_final,\n                destination_path=str(dest_path / \"cotacoes\")\n            )\n\n            if result['success']:\n                print(f\"\u2713 Extra\u00eddos {result['total_records']:,} registros\")\n\n        print(\"\u2713 Processamento conclu\u00eddo!\")\n        return 0\n\n    except Exception as e:\n        print(f\"\u2717 Erro: {e}\", file=sys.stderr)\n        return 1\n\nif __name__ == \"__main__\":\n    sys.exit(main())\n</code></pre> <p>Uso:</p> <pre><code># Download apenas CVM\npython script.py --tipo cvm --destino /data --ano-inicial 2022\n\n# Download apenas B3\npython script.py --tipo b3 --destino /data --ano-inicial 2020 --ano-final 2023\n\n# Download de ambos\npython script.py --tipo ambos --destino /data --verbose\n</code></pre>"},{"location":"user-guide/examples/#exemplo-7-integracao-com-jupyter-notebook","title":"Exemplo 7: Integra\u00e7\u00e3o com Jupyter Notebook","text":"<p>Usar Global-Data-Finance em notebooks Jupyter para an\u00e1lise interativa.</p> <pre><code># C\u00e9lula 1: Imports e configura\u00e7\u00e3o\nfrom globaldatafinance import HistoricalQuotesB3\nimport polars as pl\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.set_style(\"darkgrid\")\n%matplotlib inline\n\n# C\u00e9lula 2: Extrair dados\nb3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2023\n)\n\n# C\u00e9lula 3: Carregar e filtrar\ndf = pl.read_parquet(result['output_file'])\npetr4 = df.filter(pl.col('codigo_negociacao') == 'PETR4').to_pandas()\n\n# C\u00e9lula 4: Visualizar\nplt.figure(figsize=(14, 6))\nplt.plot(petr4['data'], petr4['preco_fechamento'])\nplt.title('PETR4 - Pre\u00e7o de Fechamento (2023)', fontsize=16)\nplt.xlabel('Data')\nplt.ylabel('Pre\u00e7o (R$)')\nplt.grid(True, alpha=0.3)\nplt.tight_layout()\nplt.show()\n\n# C\u00e9lula 5: An\u00e1lise de volume\nplt.figure(figsize=(14, 6))\nplt.bar(petr4['data'], petr4['volume_negociado'] / 1e6, alpha=0.7)\nplt.title('PETR4 - Volume Negociado (2023)', fontsize=16)\nplt.xlabel('Data')\nplt.ylabel('Volume (Milh\u00f5es R$)')\nplt.tight_layout()\nplt.show()\n</code></pre>"},{"location":"user-guide/examples/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>\ud83d\udcc4 Documentos CVM - Guia detalhado da API CVM</li> <li>\ud83d\udcc8 Cota\u00e7\u00f5es B3 - Guia detalhado da API B3</li> <li>\u2753 FAQ - Perguntas frequentes</li> <li>\ud83d\udd27 Uso Avan\u00e7ado - T\u00e9cnicas avan\u00e7adas</li> </ul>"},{"location":"user-guide/faq/","title":"FAQ - Perguntas Frequentes","text":"<p>Respostas para as perguntas mais comuns sobre o Global-Data-Finance.</p>"},{"location":"user-guide/faq/#instalacao-e-configuracao","title":"Instala\u00e7\u00e3o e Configura\u00e7\u00e3o","text":""},{"location":"user-guide/faq/#como-instalar-o-global-data-finance","title":"Como instalar o Global-Data-Finance?","text":"<pre><code>pip install globaldatafinance\n</code></pre> <p>Veja o guia completo de instala\u00e7\u00e3o para mais detalhes.</p>"},{"location":"user-guide/faq/#qual-versao-do-python-e-necessaria","title":"Qual vers\u00e3o do Python \u00e9 necess\u00e1ria?","text":"<p>Global-Data-Finance requer Python 3.12 ou superior. Vers\u00f5es anteriores n\u00e3o s\u00e3o suportadas.</p>"},{"location":"user-guide/faq/#posso-usar-em-ambiente-virtual","title":"Posso usar em ambiente virtual?","text":"<p>Sim, e \u00e9 altamente recomendado! Use <code>venv</code> ou <code>conda</code>:</p> <pre><code>python -m venv venv\nsource venv/bin/activate  # Linux/macOS\npip install globaldatafinance\n</code></pre>"},{"location":"user-guide/faq/#uso-geral","title":"Uso Geral","text":""},{"location":"user-guide/faq/#onde-os-arquivos-sao-salvos","title":"Onde os arquivos s\u00e3o salvos?","text":"<p>Os arquivos s\u00e3o salvos no diret\u00f3rio especificado em <code>destination_path</code>. Por exemplo:</p> <pre><code>cvm.download(destination_path=\"/home/usuario/dados\")\n# Arquivos salvos em: /home/usuario/dados/\n</code></pre>"},{"location":"user-guide/faq/#como-verificar-quais-documentos-estao-disponiveis","title":"Como verificar quais documentos est\u00e3o dispon\u00edveis?","text":"<p>Use os m\u00e9todos <code>get_available_*</code>:</p> <pre><code># Para CVM\ncvm = FundamentalStocksDataCVM()\ndocs = cvm.get_available_docs()\nyears = cvm.get_available_years()\n\n# Para B3\nb3 = HistoricalQuotesB3()\nassets = b3.get_available_assets()\nyears = b3.get_available_years()\n</code></pre>"},{"location":"user-guide/faq/#documentos-cvm","title":"Documentos CVM","text":""},{"location":"user-guide/faq/#quais-tipos-de-documentos-posso-baixar","title":"Quais tipos de documentos posso baixar?","text":"<ul> <li>DFP: Demonstra\u00e7\u00f5es Financeiras Padronizadas</li> <li>ITR: Informa\u00e7\u00f5es Trimestrais</li> <li>FRE: Formul\u00e1rio de Refer\u00eancia</li> <li>FCA: Formul\u00e1rio Cadastral</li> <li>CGVN: C\u00f3digo de Governan\u00e7a</li> <li>VLMO: Valores Mobili\u00e1rios</li> <li>IPE: Informa\u00e7\u00f5es Peri\u00f3dicas e Eventuais</li> </ul> <p>Veja Documentos CVM para detalhes.</p>"},{"location":"user-guide/faq/#como-baixar-apenas-um-tipo-de-documento","title":"Como baixar apenas um tipo de documento?","text":"<pre><code>cvm.download(\n    destination_path=\"/data\",\n    list_docs=[\"DFP\"],  # Apenas DFP\n    initial_year=2022\n)\n</code></pre>"},{"location":"user-guide/faq/#o-que-e-extracao-automatica","title":"O que \u00e9 extra\u00e7\u00e3o autom\u00e1tica?","text":"<p>Com <code>automatic_extractor=True</code>, os arquivos ZIP s\u00e3o automaticamente extra\u00eddos e convertidos para formato Parquet:</p> <pre><code>cvm.download(\n    destination_path=\"/data\",\n    list_docs=[\"DFP\"],\n    automatic_extractor=True  # Converte para Parquet\n)\n</code></pre>"},{"location":"user-guide/faq/#como-lidar-com-downloads-interrompidos","title":"Como lidar com downloads interrompidos?","text":"<p>A biblioteca possui retry autom\u00e1tico. Para maior robustez, implemente sua pr\u00f3pria l\u00f3gica de retry (veja estrat\u00e9gia de retry).</p>"},{"location":"user-guide/faq/#cotacoes-b3","title":"Cota\u00e7\u00f5es B3","text":""},{"location":"user-guide/faq/#onde-obter-arquivos-cotahist","title":"Onde obter arquivos COTAHIST?","text":"<p>Baixe do site oficial da B3: \ud83d\udd17 https://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/historico/mercado-a-vista/cotacoes-historicas/</p>"},{"location":"user-guide/faq/#qual-a-diferenca-entre-modo-fast-e-slow","title":"Qual a diferen\u00e7a entre modo fast e slow?","text":"Modo Performance CPU RAM Quando usar fast Alta Alto ~2GB M\u00e1quinas com bons recursos (padr\u00e3o) slow Moderada Baixo ~500MB Recursos limitados <pre><code># Modo fast (padr\u00e3o)\nresult = b3.extract(..., processing_mode=\"fast\")\n\n# Modo slow\nresult = b3.extract(..., processing_mode=\"slow\")\n</code></pre>"},{"location":"user-guide/faq/#como-extrair-apenas-acoes","title":"Como extrair apenas a\u00e7\u00f5es?","text":"<pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],  # Apenas a\u00e7\u00f5es\n    initial_year=2023\n)\n</code></pre>"},{"location":"user-guide/faq/#posso-extrair-multiplas-classes-de-ativos","title":"Posso extrair m\u00faltiplas classes de ativos?","text":"<p>Sim! Passe uma lista com as classes desejadas:</p> <pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\", \"op\u00e7\u00f5es\"],\n    initial_year=2023\n)\n</code></pre>"},{"location":"user-guide/faq/#como-personalizar-o-nome-do-arquivo-de-saida","title":"Como personalizar o nome do arquivo de sa\u00edda?","text":"<p>Use o par\u00e2metro <code>output_filename</code>:</p> <pre><code>result = b3.extract(\n    path_of_docs=\"/data/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    output_filename=\"acoes_2023\"  # Gera: acoes_2023.parquet\n)\n</code></pre>"},{"location":"user-guide/faq/#performance","title":"Performance","text":""},{"location":"user-guide/faq/#como-acelerar-downloads","title":"Como acelerar downloads?","text":"<p>O Global-Data-Finance j\u00e1 usa download paralelo por padr\u00e3o (<code>AsyncDownloadAdapterCVM</code>), que \u00e9 3-5x mais r\u00e1pido que download sequencial.</p>"},{"location":"user-guide/faq/#como-acelerar-extracao-de-cotacoes","title":"Como acelerar extra\u00e7\u00e3o de cota\u00e7\u00f5es?","text":"<p>Use o modo <code>\"fast\"</code> (padr\u00e3o):</p> <pre><code>result = b3.extract(..., processing_mode=\"fast\")\n</code></pre>"},{"location":"user-guide/faq/#posso-processar-em-paralelo","title":"Posso processar em paralelo?","text":"<p>Sim! Voc\u00ea pode executar m\u00faltiplas extra\u00e7\u00f5es em paralelo usando <code>multiprocessing</code> ou <code>concurrent.futures</code>:</p> <pre><code>from concurrent.futures import ProcessPoolExecutor\nfrom globaldatafinance import HistoricalQuotesB3\n\ndef extract_year(year):\n    b3 = HistoricalQuotesB3()\n    return b3.extract(\n        path_of_docs=\"/data/cotahist\",\n        assets_list=[\"a\u00e7\u00f5es\"],\n        initial_year=year,\n        last_year=year,\n        output_filename=f\"acoes_{year}\"\n    )\n\n# Processar anos em paralelo\nwith ProcessPoolExecutor(max_workers=4) as executor:\n    results = list(executor.map(extract_year, range(2020, 2024)))\n</code></pre>"},{"location":"user-guide/faq/#analise-de-dados","title":"An\u00e1lise de Dados","text":""},{"location":"user-guide/faq/#como-ler-os-arquivos-parquet-gerados","title":"Como ler os arquivos Parquet gerados?","text":"<p>Use Pandas ou Polars:</p> <pre><code># Com Pandas\nimport pandas as pd\ndf = pd.read_parquet(\"cotahist_extracted.parquet\")\n\n# Com Polars (mais r\u00e1pido)\nimport polars as pl\ndf = pl.read_parquet(\"cotahist_extracted.parquet\")\n</code></pre>"},{"location":"user-guide/faq/#qual-biblioteca-e-melhor-pandas-ou-polars","title":"Qual biblioteca \u00e9 melhor: Pandas ou Polars?","text":"<ul> <li>Pandas: Mais popular, maior ecossistema, boa para datasets pequenos/m\u00e9dios</li> <li>Polars: Muito mais r\u00e1pido, menor uso de mem\u00f3ria, ideal para grandes volumes</li> </ul> <p>Para an\u00e1lise de dados financeiros (grandes volumes), recomendamos Polars.</p>"},{"location":"user-guide/faq/#como-filtrar-dados-de-um-ativo-especifico","title":"Como filtrar dados de um ativo espec\u00edfico?","text":"<pre><code>import polars as pl\n\ndf = pl.read_parquet(\"cotahist_extracted.parquet\")\n\n# Filtrar PETR4\npetr4 = df.filter(pl.col('codigo_negociacao') == 'PETR4')\n\n# Ou com Pandas\nimport pandas as pd\ndf = pd.read_parquet(\"cotahist_extracted.parquet\")\npetr4 = df[df['codigo_negociacao'] == 'PETR4']\n</code></pre>"},{"location":"user-guide/faq/#erros-comuns","title":"Erros Comuns","text":""},{"location":"user-guide/faq/#no-module-named-globaldatafinance","title":"\u201cNo module named \u2018globaldatafinance\u2019\u201d","text":"<p>Causa: Biblioteca n\u00e3o instalada ou ambiente virtual n\u00e3o ativado.</p> <p>Solu\u00e7\u00e3o:</p> <pre><code>pip install globaldatafinance\n</code></pre>"},{"location":"user-guide/faq/#python-version-not-supported","title":"\u201cPython version not supported\u201d","text":"<p>Causa: Python &lt; 3.12.</p> <p>Solu\u00e7\u00e3o: Atualize para Python 3.12+.</p>"},{"location":"user-guide/faq/#invaliddocname","title":"\u201cInvalidDocName\u201d","text":"<p>Causa: Tipo de documento inv\u00e1lido.</p> <p>Solu\u00e7\u00e3o: Verifique tipos dispon\u00edveis:</p> <pre><code>docs = cvm.get_available_docs()\nprint(list(docs.keys()))\n</code></pre>"},{"location":"user-guide/faq/#emptydirectoryerror","title":"\u201cEmptyDirectoryError\u201d","text":"<p>Causa: Diret\u00f3rio vazio ou sem arquivos COTAHIST.</p> <p>Solu\u00e7\u00e3o: Verifique se os arquivos <code>COTAHIST_AXXXX.ZIP</code> est\u00e3o no diret\u00f3rio.</p>"},{"location":"user-guide/faq/#networkerror-ou-timeouterror","title":"\u201cNetworkError\u201d ou \u201cTimeoutError\u201d","text":"<p>Causa: Problemas de conex\u00e3o.</p> <p>Solu\u00e7\u00e3o:</p> <ol> <li>Verifique sua conex\u00e3o com a internet</li> <li>Tente novamente mais tarde</li> <li>Implemente retry logic (veja estrat\u00e9gia de retry)</li> </ol>"},{"location":"user-guide/faq/#producao-e-deploy","title":"Produ\u00e7\u00e3o e Deploy","text":""},{"location":"user-guide/faq/#posso-usar-em-producao","title":"Posso usar em produ\u00e7\u00e3o?","text":"<p>Sim! O Global-Data-Finance \u00e9 est\u00e1vel e testado. Recomenda\u00e7\u00f5es:</p> <ul> <li>Use logging apropriado</li> <li>Implemente tratamento de erros robusto</li> <li>Configure retry logic para downloads</li> <li>Monitore uso de disco e mem\u00f3ria</li> </ul>"},{"location":"user-guide/faq/#como-agendar-downloads-automaticos","title":"Como agendar downloads autom\u00e1ticos?","text":"<p>Use <code>cron</code> (Linux/macOS) ou Task Scheduler (Windows):</p> <pre><code># Crontab: executar todo dia \u00e0s 2h da manh\u00e3\n0 2 * * * /path/to/venv/bin/python /path/to/script.py\n</code></pre>"},{"location":"user-guide/faq/#como-integrar-com-pipelines-de-dados","title":"Como integrar com pipelines de dados?","text":"<p>Global-Data-Finance funciona bem com:</p> <ul> <li>Apache Airflow: Crie DAGs para orquestra\u00e7\u00e3o</li> <li>Prefect: Use como tasks em flows</li> <li>Luigi: Integre como tasks</li> <li>Dagster: Use como ops/assets</li> </ul> <p>Exemplo com Airflow:</p> <pre><code>from airflow import DAG\nfrom airflow.operators.python import PythonOperator\nfrom globaldatafinance import FundamentalStocksDataCVM\n\ndef download_cvm():\n    cvm = FundamentalStocksDataCVM()\n    cvm.download(\n        destination_path=\"/data/cvm\",\n        list_docs=[\"DFP\"],\n        initial_year=2023\n    )\n\nwith DAG('cvm_download', ...) as dag:\n    task = PythonOperator(\n        task_id='download',\n        python_callable=download_cvm\n    )\n</code></pre>"},{"location":"user-guide/faq/#contribuicao","title":"Contribui\u00e7\u00e3o","text":""},{"location":"user-guide/faq/#como-contribuir-com-o-projeto","title":"Como contribuir com o projeto?","text":"<p>Veja o guia de contribui\u00e7\u00e3o para detalhes completos.</p>"},{"location":"user-guide/faq/#como-reportar-bugs","title":"Como reportar bugs?","text":"<p>Abra uma issue no GitHub: \ud83d\udd17 https://github.com/jor0105/Global-Data-Finance/issues</p>"},{"location":"user-guide/faq/#como-sugerir-novas-funcionalidades","title":"Como sugerir novas funcionalidades?","text":"<p>Abra uma issue com a tag <code>enhancement</code> no GitHub.</p>"},{"location":"user-guide/faq/#licenca-e-uso","title":"Licen\u00e7a e Uso","text":""},{"location":"user-guide/faq/#qual-a-licenca-do-global-data-finance","title":"Qual a licen\u00e7a do Global-Data-Finance?","text":"<p>Apache License 2.0.</p>"},{"location":"user-guide/faq/#posso-usar-em-projetos-comerciais","title":"Posso usar em projetos comerciais?","text":"<p>Sim! A licen\u00e7a Apache 2.0 permite uso comercial.</p>"},{"location":"user-guide/faq/#os-dados-baixados-tem-restricoes-de-uso","title":"Os dados baixados t\u00eam restri\u00e7\u00f5es de uso?","text":"<p>Os dados s\u00e3o p\u00fablicos e fornecidos pela CVM e B3. Consulte os termos de uso de cada institui\u00e7\u00e3o:</p> <ul> <li>CVM: http://www.cvm.gov.br/</li> <li>B3: https://www.b3.com.br/</li> </ul>"},{"location":"user-guide/faq/#suporte","title":"Suporte","text":""},{"location":"user-guide/faq/#onde-obter-ajuda","title":"Onde obter ajuda?","text":"<ol> <li>Documenta\u00e7\u00e3o: Leia a documenta\u00e7\u00e3o completa</li> <li>GitHub Issues: Abra uma issue</li> <li>Email: estraliotojordan@gmail.com</li> </ol>"},{"location":"user-guide/faq/#como-reportar-problemas-de-seguranca","title":"Como reportar problemas de seguran\u00e7a?","text":"<p>Envie um email para: estraliotojordan@gmail.com</p> <p>N\u00e3o encontrou sua pergunta?</p> <p>Abra uma issue no GitHub ou consulte a documenta\u00e7\u00e3o completa.</p>"},{"location":"user-guide/installation/","title":"Instala\u00e7\u00e3o","text":"<p>Este guia fornece instru\u00e7\u00f5es detalhadas para instalar e configurar a biblioteca Global-Data-Finance em diferentes ambientes.</p>"},{"location":"user-guide/installation/#requisitos-do-sistema","title":"Requisitos do Sistema","text":"<p>Antes de instalar o Global-Data-Finance, certifique-se de que seu sistema atende aos seguintes requisitos:</p>"},{"location":"user-guide/installation/#requisitos-obrigatorios","title":"Requisitos Obrigat\u00f3rios","text":"<ul> <li>Python: Vers\u00e3o 3.12 ou superior</li> <li>Sistema Operacional: Linux, macOS ou Windows</li> <li>Espa\u00e7o em Disco: M\u00ednimo de 2 GB para conseguir baixar todos os dados</li> <li>Mem\u00f3ria RAM: M\u00ednimo de 3 GB (recomendado 6 GB ou mais para grandes volumes)</li> </ul>"},{"location":"user-guide/installation/#verificar-versao-do-python","title":"Verificar Vers\u00e3o do Python","text":"<pre><code>python --version\n# ou\npython3 --version\n</code></pre> <p>Vers\u00e3o do Python</p> <p>O Global-Data-Finance requer Python 3.12 ou superior. Se voc\u00ea possui uma vers\u00e3o anterior, ser\u00e1 necess\u00e1rio atualizar o Python antes de prosseguir.</p>"},{"location":"user-guide/installation/#instalacao-via-pip-recomendado","title":"Instala\u00e7\u00e3o via pip (Recomendado)","text":"<p>A forma mais simples de instalar o Global-Data-Finance \u00e9 atrav\u00e9s do PyPI usando o <code>pip</code>:</p> <pre><code>pip install globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#instalacao-em-ambiente-virtual-recomendado","title":"Instala\u00e7\u00e3o em Ambiente Virtual (Recomendado)","text":"<p>\u00c9 altamente recomendado instalar o Global-Data-Finance em um ambiente virtual para evitar conflitos de depend\u00eancias:</p> <pre><code># Criar ambiente virtual\npython -m venv venv\n\n# Ativar ambiente virtual\n# No Linux/macOS:\nsource venv/bin/activate\n\n# No Windows:\nvenv\\Scripts\\activate\n\n# Instalar Global-Data-Finance\npip install globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#atualizar-para-ultima-versao","title":"Atualizar para \u00daltima Vers\u00e3o","text":"<pre><code>pip install --upgrade globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#instalacao-via-poetry","title":"Instala\u00e7\u00e3o via Poetry","text":"<p>Se voc\u00ea usa Poetry para gerenciamento de depend\u00eancias:</p> <pre><code># Adicionar ao projeto\npoetry add globaldatafinance\n\n# Ou instalar em modo desenvolvimento\npoetry add --group dev globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#instalacao-para-desenvolvimento","title":"Instala\u00e7\u00e3o para Desenvolvimento","text":"<p>Se voc\u00ea deseja contribuir com o projeto ou modificar o c\u00f3digo-fonte:</p>"},{"location":"user-guide/installation/#1-clonar-o-repositorio","title":"1. Clonar o Reposit\u00f3rio","text":"<pre><code>git clone https://github.com/jor0105/Global-Data-Finance.git\ncd Global-Data-Finance\n</code></pre>"},{"location":"user-guide/installation/#2-instalar-com-poetry-recomendado","title":"2. Instalar com Poetry (Recomendado)","text":"<pre><code># Instalar todas as depend\u00eancias (incluindo dev)\npoetry install\n\n# Ativar ambiente virtual do Poetry\npoetry shell\n</code></pre>"},{"location":"user-guide/installation/#3-instalar-com-pip-em-modo-editavel","title":"3. Instalar com pip em Modo Edit\u00e1vel","text":"<pre><code># Criar e ativar ambiente virtual\npython -m venv venv\nsource venv/bin/activate  # Linux/macOS\n# ou\nvenv\\Scripts\\activate  # Windows\n\n# Instalar em modo edit\u00e1vel\npip install -e .\n\n# Instalar depend\u00eancias de desenvolvimento\npip install -e \".[dev]\"\n</code></pre>"},{"location":"user-guide/installation/#dependencias","title":"Depend\u00eancias","text":"<p>O Global-Data-Finance possui as seguintes depend\u00eancias principais:</p>"},{"location":"user-guide/installation/#dependencias-obrigatorias","title":"Depend\u00eancias Obrigat\u00f3rias","text":"Biblioteca Vers\u00e3o Descri\u00e7\u00e3o <code>httpx</code> \u22650.28.1 Cliente HTTP ass\u00edncrono com suporte HTTP/2 <code>pandas</code> \u22652.3.3 Manipula\u00e7\u00e3o e an\u00e1lise de dados <code>polars</code> \u22651.0.0 Processamento de dados de alto desempenho <code>pyarrow</code> \u226522.0.0 Suporte para formato Apache Parquet <code>pydantic-settings</code> \u22652.11.0 Configura\u00e7\u00e3o e valida\u00e7\u00e3o de dados <code>psutil</code> \u22655.9.0 Utilit\u00e1rios de sistema e processos"},{"location":"user-guide/installation/#dependencias-de-desenvolvimento-opcionais","title":"Depend\u00eancias de Desenvolvimento (Opcionais)","text":"<p>Instaladas automaticamente apenas em modo desenvolvimento:</p> Biblioteca Descri\u00e7\u00e3o <code>pytest</code> Framework de testes <code>pytest-cov</code> Cobertura de testes <code>pytest-asyncio</code> Suporte a testes ass\u00edncronos <code>mypy</code> Verifica\u00e7\u00e3o de tipos est\u00e1ticos <code>pre-commit</code> Hooks de pr\u00e9-commit <code>mkdocs</code> Gerador de documenta\u00e7\u00e3o <code>mkdocs-material</code> Tema Material para MkDocs"},{"location":"user-guide/installation/#verificacao-da-instalacao","title":"Verifica\u00e7\u00e3o da Instala\u00e7\u00e3o","text":"<p>Ap\u00f3s a instala\u00e7\u00e3o, verifique se tudo est\u00e1 funcionando corretamente:</p>"},{"location":"user-guide/installation/#1-verificar-importacao","title":"1. Verificar Importa\u00e7\u00e3o","text":"<pre><code># Abrir Python interativo\npython\n\n# Tentar importar a biblioteca\n&gt;&gt;&gt; from globaldatafinance import FundamentalStocksDataCVM, HistoricalQuotesB3\n&gt;&gt;&gt; print(\"\u2713 Global-Data-Finance instalado com sucesso!\")\n</code></pre>"},{"location":"user-guide/installation/#2-verificar-versao","title":"2. Verificar Vers\u00e3o","text":"<pre><code>&gt;&gt;&gt; import globaldatafinance\n&gt;&gt;&gt; print(globaldatafinance.__version__)\n0.1.0\n</code></pre>"},{"location":"user-guide/installation/#3-teste-basico","title":"3. Teste B\u00e1sico","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\n\n# Criar inst\u00e2ncia\ncvm = FundamentalStocksDataCVM()\n\n# Verificar documentos dispon\u00edveis\ndocs = cvm.get_available_docs()\nprint(f\"\u2713 Encontrados {len(docs)} tipos de documentos dispon\u00edveis\")\n\n# Verificar anos dispon\u00edveis\nyears = cvm.get_available_years()\nprint(f\"\u2713 Dados dispon\u00edveis de {years['General Document Years']} at\u00e9 {years['Current Year']}\")\n</code></pre> <p>Se todos os comandos acima executarem sem erros, a instala\u00e7\u00e3o foi bem-sucedida! \u2705</p>"},{"location":"user-guide/installation/#solucao-de-problemas","title":"Solu\u00e7\u00e3o de Problemas","text":""},{"location":"user-guide/installation/#erro-no-module-named-globaldatafinance","title":"Erro: \u201cNo module named \u2018globaldatafinance\u2019\u201d","text":"<p>Causa: A biblioteca n\u00e3o foi instalada corretamente ou o ambiente virtual n\u00e3o est\u00e1 ativado.</p> <p>Solu\u00e7\u00e3o:</p> <pre><code># Verificar se est\u00e1 no ambiente virtual correto\nwhich python  # Linux/macOS\nwhere python  # Windows\n\n# Reinstalar a biblioteca\npip install --force-reinstall globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#erro-python-version-312-or-higher-required","title":"Erro: \u201cPython version 3.12 or higher required\u201d","text":"<p>Causa: Vers\u00e3o do Python \u00e9 anterior a 3.12.</p> <p>Solu\u00e7\u00e3o:</p> <ol> <li>Instale Python 3.12 ou superior do site oficial</li> <li>Crie um novo ambiente virtual com a vers\u00e3o correta:</li> </ol> <pre><code>python3.12 -m venv venv\nsource venv/bin/activate\npip install globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#erro-de-dependencias","title":"Erro de Depend\u00eancias","text":"<p>Causa: Conflito com outras bibliotecas instaladas.</p> <p>Solu\u00e7\u00e3o:</p> <pre><code># Criar ambiente virtual limpo\npython -m venv venv_clean\nsource venv_clean/bin/activate\npip install globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#erro-de-permissao-linuxmacos","title":"Erro de Permiss\u00e3o (Linux/macOS)","text":"<p>Causa: Tentativa de instala\u00e7\u00e3o sem permiss\u00f5es adequadas.</p> <p>Solu\u00e7\u00e3o:</p> <pre><code># N\u00c3O use sudo pip install!\n# Em vez disso, use ambiente virtual:\npython -m venv venv\nsource venv/bin/activate\npip install globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#problemas-com-proxy-corporativo","title":"Problemas com Proxy Corporativo","text":"<p>Se voc\u00ea est\u00e1 atr\u00e1s de um proxy corporativo:</p> <pre><code># Configurar proxy\nexport HTTP_PROXY=\"http://proxy.empresa.com:8080\"\nexport HTTPS_PROXY=\"http://proxy.empresa.com:8080\"\n\n# Instalar com pip\npip install globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#desinstalacao","title":"Desinstala\u00e7\u00e3o","text":"<p>Para remover o Global-Data-Finance do seu sistema:</p> <pre><code>pip uninstall globaldatafinance\n</code></pre>"},{"location":"user-guide/installation/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<p>Agora que voc\u00ea instalou o Global-Data-Finance com sucesso, explore:</p> <ul> <li>\ud83d\ude80 In\u00edcio R\u00e1pido - Primeiros passos e exemplos b\u00e1sicos</li> <li>\ud83d\udcc4 Documentos CVM - Guia completo da API CVM</li> <li>\ud83d\udcc8 Cota\u00e7\u00f5es B3 - Guia completo da API B3</li> <li>\ud83d\udcbb Exemplos Pr\u00e1ticos - Casos de uso reais</li> </ul> <p>Dica para Desenvolvedores</p> <p>Se voc\u00ea planeja contribuir com o projeto, consulte o Guia de Contribui\u00e7\u00e3o para configurar seu ambiente de desenvolvimento completo.</p>"},{"location":"user-guide/quickstart/","title":"In\u00edcio R\u00e1pido","text":"<p>Bem-vindo ao Global-Data-Finance! Este guia ir\u00e1 ajud\u00e1-lo a dar os primeiros passos com a biblioteca atrav\u00e9s de exemplos pr\u00e1ticos e simples.</p>"},{"location":"user-guide/quickstart/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<p>Antes de come\u00e7ar, certifique-se de que voc\u00ea:</p> <ul> <li>\u2705 Instalou o Global-Data-Finance (ver guia de instala\u00e7\u00e3o)</li> <li>\u2705 Possui Python 3.12 ou superior</li> <li>\u2705 Tem acesso \u00e0 internet para downloads</li> </ul>"},{"location":"user-guide/quickstart/#primeiro-exemplo-documentos-cvm","title":"Primeiro Exemplo: Documentos CVM","text":"<p>Vamos come\u00e7ar baixando documentos fundamentalistas da CVM (Comiss\u00e3o de Valores Mobili\u00e1rios).</p>"},{"location":"user-guide/quickstart/#codigo-basico","title":"C\u00f3digo B\u00e1sico","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\n\n# 1. Criar inst\u00e2ncia do cliente CVM\ncvm = FundamentalStocksDataCVM()\n\n# 2. Baixar documentos DFP (Demonstra\u00e7\u00f5es Financeiras Padronizadas)\ncvm.download(\n    destination_path=\"/home/usuario/dados_cvm\",\n    list_docs=[\"DFP\"],\n    initial_year=2022,\n    last_year=2023\n)\n</code></pre>"},{"location":"user-guide/quickstart/#o-que-acontece","title":"O que acontece?","text":"<ol> <li>Cria\u00e7\u00e3o do cliente: Inicializa o cliente CVM com configura\u00e7\u00f5es padr\u00e3o</li> <li>Download: Baixa todos os arquivos DFP dos anos 2022 e 2023</li> <li>Resultado: Arquivos ZIP s\u00e3o salvos em <code>/home/usuario/dados_cvm</code></li> </ol>"},{"location":"user-guide/quickstart/#saida-esperada","title":"Sa\u00edda Esperada","text":"<pre><code>\ud83d\udce5 Download de Documentos CVM\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2713 Documentos baixados com sucesso!\n\n\ud83d\udcca Resumo:\n  \u2022 Total de arquivos: 2\n  \u2022 Sucesso: 2\n  \u2022 Erros: 0\n  \u2022 Tempo decorrido: 45.3s\n\n\ud83d\udcc1 Arquivos baixados:\n  \u2713 DFP - 2022\n  \u2713 DFP - 2023\n</code></pre>"},{"location":"user-guide/quickstart/#segundo-exemplo-cotacoes-historicas-b3","title":"Segundo Exemplo: Cota\u00e7\u00f5es Hist\u00f3ricas B3","text":"<p>Agora vamos extrair cota\u00e7\u00f5es hist\u00f3ricas da B3 (Bolsa de Valores do Brasil).</p>"},{"location":"user-guide/quickstart/#codigo-basico_1","title":"C\u00f3digo B\u00e1sico","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\n\n# 1. Criar inst\u00e2ncia do cliente B3\nb3 = HistoricalQuotesB3()\n\n# 2. Extrair cota\u00e7\u00f5es de a\u00e7\u00f5es\nresult = b3.extract(\n    path_of_docs=\"/home/usuario/cotahist_zips\",\n    assets_list=[\"a\u00e7\u00f5es\"],\n    initial_year=2023,\n    destination_path=\"/home/usuario/cotacoes_extraidas\"\n)\n</code></pre>"},{"location":"user-guide/quickstart/#o-que-acontece_1","title":"O que acontece?","text":"<ol> <li>Cria\u00e7\u00e3o do cliente: Inicializa o cliente B3</li> <li>Extra\u00e7\u00e3o: Processa arquivos COTAHIST ZIP e extrai dados de a\u00e7\u00f5es</li> <li>Convers\u00e3o: Converte para formato Parquet otimizado</li> <li>Resultado: Arquivo <code>.parquet</code> com todas as cota\u00e7\u00f5es</li> </ol>"},{"location":"user-guide/quickstart/#saida-esperada_1","title":"Sa\u00edda Esperada","text":"<pre><code>\ud83d\udcca Extra\u00e7\u00e3o de Cota\u00e7\u00f5es B3\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2713 Extra\u00e7\u00e3o conclu\u00edda com sucesso!\n\n\ud83d\udcc8 Resumo:\n  \u2022 Arquivos processados: 2\n  \u2022 Total de registros: 836,978\n  \u2022 Classes de ativos: a\u00e7\u00f5es\n  \u2022 Modo de processamento: fast\n  \u2022 Tempo decorrido: 77.9s\n\n\ud83d\udcbe Arquivo gerado:\n  /home/usuario/cotacoes_extraidas/cotahist_extracted.parquet\n</code></pre>"},{"location":"user-guide/quickstart/#explorando-dados-disponiveis","title":"Explorando Dados Dispon\u00edveis","text":"<p>Antes de baixar ou extrair dados, voc\u00ea pode descobrir o que est\u00e1 dispon\u00edvel.</p>"},{"location":"user-guide/quickstart/#descobrir-documentos-cvm","title":"Descobrir Documentos CVM","text":"<pre><code>from globaldatafinance import FundamentalStocksDataCVM\n\ncvm = FundamentalStocksDataCVM()\n\n# Listar todos os tipos de documentos dispon\u00edveis\ndocs = cvm.get_available_docs()\nfor code, description in docs.items():\n    print(f\"{code}: {description}\")\n\n# Verificar anos dispon\u00edveis\nyears = cvm.get_available_years()\nprint(f\"\\nDados dispon\u00edveis de {years['General Document Years']} at\u00e9 {years['Current Year']}\")\n</code></pre> <p>Sa\u00edda:</p> <pre><code>DFP: Demonstra\u00e7\u00e3o Financeira Padronizada\nITR: Informa\u00e7\u00e3o Trimestral\nFRE: Formul\u00e1rio de Refer\u00eancia\nFCA: Formul\u00e1rio Cadastral\n...\n\nDados dispon\u00edveis de 2010 at\u00e9 o ano atual\n</code></pre>"},{"location":"user-guide/quickstart/#descobrir-classes-de-ativos-b3","title":"Descobrir Classes de Ativos B3","text":"<pre><code>from globaldatafinance import HistoricalQuotesB3\n\nb3 = HistoricalQuotesB3()\n\n# Listar classes de ativos dispon\u00edveis\nassets = b3.get_available_assets()\nprint(\"Classes de ativos dispon\u00edveis:\")\nfor asset in assets:\n    print(f\"  \u2022 {asset}\")\n\n# Verificar intervalo de anos\nyears = b3.get_available_years()\nprint(f\"\\nDados dispon\u00edveis de {years['minimal_year']} at\u00e9 {years['current_year']}\")\n</code></pre> <p>Sa\u00edda:</p> <pre><code>Classes de ativos dispon\u00edveis:\n  \u2022 a\u00e7\u00f5es\n  \u2022 etf\n  \u2022 op\u00e7\u00f5es\n  \u2022 termo\n  \u2022 exercicio_opcoes\n  \u2022 forward\n  \u2022 leilao\n\nDados dispon\u00edveis de 1986 at\u00e9 o ano atual\n</code></pre>"},{"location":"user-guide/quickstart/#exemplo-completo-pipeline-de-dados","title":"Exemplo Completo: Pipeline de Dados","text":"<p>Aqui est\u00e1 um exemplo mais completo que combina download e extra\u00e7\u00e3o:</p> <pre><code>from globaldatafinance import FundamentalStocksDataCVM, HistoricalQuotesB3\n\n# === PARTE 1: Download de Documentos CVM ===\nprint(\"=\" * 60)\nprint(\"ETAPA 1: Download de Documentos CVM\")\nprint(\"=\" * 60)\n\ncvm = FundamentalStocksDataCVM()\ncvm.download(\n    destination_path=\"/home/usuario/dados_financeiros/cvm\",\n    list_docs=[\"DFP\", \"ITR\"],\n    initial_year=2022,\n    last_year=2023,\n    automatic_extractor=True  # Extrai automaticamente para Parquet\n)\n\n# === PARTE 2: Extra\u00e7\u00e3o de Cota\u00e7\u00f5es B3 ===\nprint(\"\\n\" + \"=\" * 60)\nprint(\"ETAPA 2: Extra\u00e7\u00e3o de Cota\u00e7\u00f5es B3\")\nprint(\"=\" * 60)\n\nb3 = HistoricalQuotesB3()\nresult = b3.extract(\n    path_of_docs=\"/home/usuario/dados_financeiros/cotahist\",\n    assets_list=[\"a\u00e7\u00f5es\", \"etf\"],\n    initial_year=2022,\n    last_year=2023,\n    destination_path=\"/home/usuario/dados_financeiros/cotacoes\",\n    output_filename=\"acoes_etf_2022_2023\",\n    processing_mode=\"fast\"\n)\n\n# === PARTE 3: An\u00e1lise dos Resultados ===\nprint(\"\\n\" + \"=\" * 60)\nprint(\"RESUMO FINAL\")\nprint(\"=\" * 60)\n\nif result['success']:\n    print(f\"\u2713 Pipeline conclu\u00eddo com sucesso!\")\n    print(f\"\u2713 Total de registros extra\u00eddos: {result['total_records']:,}\")\n    print(f\"\u2713 Arquivo de cota\u00e7\u00f5es: {result['output_file']}\")\nelse:\n    print(f\"\u2717 Houve erros durante a extra\u00e7\u00e3o\")\n    if 'errors' in result:\n        for error in result['errors']:\n            print(f\"  \u2022 {error}\")\n</code></pre>"},{"location":"user-guide/quickstart/#trabalhando-com-os-dados-extraidos","title":"Trabalhando com os Dados Extra\u00eddos","text":"<p>Ap\u00f3s extrair os dados, voc\u00ea pode analis\u00e1-los com Pandas ou Polars:</p>"},{"location":"user-guide/quickstart/#com-pandas","title":"Com Pandas","text":"<pre><code>import pandas as pd\n\n# Ler arquivo Parquet gerado\ndf = pd.read_parquet(\"/home/usuario/cotacoes_extraidas/cotahist_extracted.parquet\")\n\n# Visualizar primeiras linhas\nprint(df.head())\n\n# Informa\u00e7\u00f5es sobre o dataset\nprint(f\"\\nTotal de registros: {len(df):,}\")\nprint(f\"Colunas: {list(df.columns)}\")\nprint(f\"Per\u00edodo: {df['data'].min()} a {df['data'].max()}\")\n</code></pre>"},{"location":"user-guide/quickstart/#com-polars-mais-rapido","title":"Com Polars (Mais R\u00e1pido)","text":"<pre><code>import polars as pl\n\n# Ler arquivo Parquet\ndf = pl.read_parquet(\"/home/usuario/cotacoes_extraidas/cotahist_extracted.parquet\")\n\n# An\u00e1lise r\u00e1pida\nprint(df.head())\nprint(f\"\\nShape: {df.shape}\")\nprint(f\"Mem\u00f3ria: {df.estimated_size('mb'):.2f} MB\")\n</code></pre>"},{"location":"user-guide/quickstart/#dicas-para-iniciantes","title":"Dicas para Iniciantes","text":"<p>Comece Pequeno</p> <p>Ao testar pela primeira vez, use intervalos de anos pequenos (ex: 1-2 anos) para entender o comportamento da biblioteca antes de fazer downloads grandes.</p> <p>Use Modo Fast</p> <p>Para extra\u00e7\u00e3o de cota\u00e7\u00f5es B3, o modo <code>\"fast\"</code> \u00e9 recomendado na maioria dos casos, oferecendo melhor performance.</p> <p>Verifique Espa\u00e7o em Disco</p> <p>Documentos CVM e cota\u00e7\u00f5es hist\u00f3ricas podem ocupar bastante espa\u00e7o. Certifique-se de ter espa\u00e7o suficiente antes de baixar muitos anos.</p>"},{"location":"user-guide/quickstart/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<p>Agora que voc\u00ea conhece o b\u00e1sico, explore:</p> <ul> <li>\ud83d\udcc4 Documentos CVM - Guia completo da API CVM</li> <li>\ud83d\udcc8 Cota\u00e7\u00f5es B3 - Guia completo da API B3</li> <li>\ud83d\udcbb Exemplos Pr\u00e1ticos - Casos de uso avan\u00e7ados</li> <li>\u2753 FAQ - Perguntas frequentes</li> </ul> <p>Parab\u00e9ns!</p> <p>Voc\u00ea completou o guia de in\u00edcio r\u00e1pido! Agora voc\u00ea est\u00e1 pronto para explorar todo o potencial do Global-Data-Finance. \ud83d\ude80</p>"}]}